import{a as Se,b as J,c as gt}from"./chunk-7RMHXTQL.js";import{b as Z,c as m,d as T,e as q,f as ht,g as j,h as V,j as G,k as W,l as Q,m as $,n as Me,o as Ee,p as K,q as A,r as Y,u as N}from"./chunk-SULFMCNP.js";import{b as Ie,g as pt,h as E,i as ne,m as re}from"./chunk-BCCDL4G2.js";import"./chunk-XAZLOLJU.js";import{$ as g,Ab as at,Bb as st,Db as b,Ea as s,Eb as lt,Fa as L,Fb as ee,G as He,Ib as R,Pa as $e,Q as We,R as Ue,S as se,Ua as h,V as le,Ya as d,a as P,ab as Ke,b as ye,bb as Ye,cb as Je,da as y,db as n,eb as i,ec as dt,fa as Be,fb as p,fc as Ce,g as je,gb as Xe,gc as F,hb as et,hc as ct,ib as z,j as ae,jc as M,k as be,ka as Ze,kb as f,la as C,lc as mt,ma as I,mb as _,nb as tt,ob as it,r as Ve,ra as de,s as Ge,sa as B,sb as nt,tb as rt,ua as qe,ub as w,vb as a,wb as v,xb as k,ya as Qe,yb as D,zb as ot}from"./chunk-YRFRVEA6.js";var H=class o{baseURL=`${Se.baseURL}/user/profile`;http=g(Ie);emergencyInfoUpdated=new ae;clinicalHistoryUpdated=new ae;emergencyInfoUpdated$=this.emergencyInfoUpdated.asObservable();clinicalHistoryUpdated$=this.clinicalHistoryUpdated.asObservable();notifyEmergencyInfoUpdated(){this.emergencyInfoUpdated.next()}notifyClinicalHistoryUpdated(){this.clinicalHistoryUpdated.next()}constructor(){}getUserbyID(r){return this.http.get(`${this.baseURL}/${r}`)}updatePatientProfile(r,e){return this.http.put(`${this.baseURL}/${r}`,e).pipe(se(()=>this.notifyEmergencyInfoUpdated()))}createHistoryClinical(r){return this.http.post(`${this.baseURL}/add/History`,r).pipe(se(()=>this.notifyClinicalHistoryUpdated()))}updateHistoryClinical(r){return this.http.put(`${this.baseURL}/update/History`,r).pipe(se(()=>this.notifyClinicalHistoryUpdated()))}getHistoryClinical(){return this.http.get(`${this.baseURL}/History`)}createEmergencyInfo(r){return this.http.post(`${this.baseURL}/add/emergencyInfo`,r).pipe(se(()=>this.notifyEmergencyInfoUpdated()))}getEmercenCyInfo(){return this.http.get(`${this.baseURL}/emergencyInfo`)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=le({token:o,factory:o.\u0275fac,providedIn:"root"})};var ze=(o,r)=>({"btn-outline-light":o,"btn-secondary":r});function bt(o,r){if(o&1&&(Xe(0),n(1,"button",16),p(2,"i",17),a(3," Agendar Cita "),i(),et()),o&2){let e=_();s(),d("ngClass",ee(1,ze,!e.isActive("/patient/cita"),e.isActive("/patient/cita")))}}function Ct(o,r){if(o&1){let e=z();n(0,"button",13),f("click",function(){C(e);let l=_();return I(l.ErrorDatosIncompletos())}),p(1,"i",17),a(2," Agendar Cita "),i()}}var xe=class o{router=g(E);authService=g(re);patientService=g(H);snackbar=g(N);hasEmergencyInfo=!1;hasClinicalHistoric=!1;isAuthenticated=!1;ngOnInit(){console.log(this.hasEmergencyInfo,this.hasClinicalHistoric),this.consultarEstadoDatos(),this.patientService.emergencyInfoUpdated$.subscribe(()=>{this.consultarEstadoDatos()}),this.patientService.clinicalHistoryUpdated$.subscribe(()=>{this.consultarEstadoDatos()})}consultarEstadoDatos(){this.patientService.getEmercenCyInfo().subscribe({next:()=>{this.hasEmergencyInfo=!0,console.log("Informaci\xF3n de emergencia encontrada")},error:()=>{this.hasEmergencyInfo=!1}}),this.patientService.getHistoryClinical().subscribe({next:()=>{this.hasClinicalHistoric=!0,console.log("Historia cl\xEDnica encontrada")},error:()=>{this.hasClinicalHistoric=!1}})}isActive(r){return this.router.isActive(r,{paths:"exact",queryParams:"ignored",fragment:"ignored",matrixParams:"ignored"})}ErrorDatosIncompletos(){this.hasEmergencyInfo==!1&&this.showSnackBar("Error debes completar tu informacion de emergencia"),this.hasClinicalHistoric==!1&&this.showSnackBar("Error debes completar tu informacion clinica")}logout(){this.authService.logout(),this.isAuthenticated=!1,this.router.navigate(["/auth/login"])}showSnackBar(r){this.snackbar.open(r,"Close",{duration:2e3,verticalPosition:"top"})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-patient-layout"]],standalone:!0,features:[b],decls:24,vars:14,consts:[["DatosFaltantes",""],[1,"container-fluid"],[1,"row"],[1,"color","col-md-1","d-grid","gap-2"],[1,"row","p-0"],["routerLink","/patient",1,"btn",3,"ngClass"],[1,"fa-regular","fa-user"],[1,"row","p-0","text-light"],[4,"ngIf","ngIfElse"],["routerLink","/patient/HistoriaClinica",1,"btn",3,"ngClass"],[1,"fa-regular","fa-comment"],["routerLink","/patient/MisCitas",1,"btn",3,"ngClass"],[1,"fa-solid","fa-clock-rotate-left",2,"color","#ffffff"],[1,"btn",3,"click"],[1,"fa-solid","fa-right-from-bracket","fa-rotate-180",2,"color","#ffffff"],[1,"col-md-11"],["routerLink","/patient/cita",1,"btn",3,"ngClass"],[1,"fa-regular","fa-calendar"]],template:function(e,t){if(e&1){let l=z();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),p(5,"i",6),a(6," Cuenta "),i()(),n(7,"div",7),h(8,bt,4,4,"ng-container",8)(9,Ct,3,0,"ng-template",null,0,R),i(),n(11,"div",7)(12,"button",9),p(13,"i",10),a(14," Historia Clinica "),i()(),n(15,"div",7)(16,"button",11),p(17,"i",12),a(18," Historial "),i()(),n(19,"div",7)(20,"button",13),f("click",function(){return C(l),I(t.logout())}),p(21,"i",14),i()()(),n(22,"div",15),p(23,"router-outlet"),i()()()}if(e&2){let l=w(10);s(4),d("ngClass",ee(5,ze,!t.isActive("/patient"),t.isActive("/patient"))),s(4),d("ngIf",t.hasEmergencyInfo===!0&&t.hasClinicalHistoric===!0)("ngIfElse",l),s(4),d("ngClass",ee(8,ze,!t.isActive("/patient/HistoriaClinica"),t.isActive("/patient/HistoriaClinica"))),s(4),d("ngClass",ee(11,ze,!t.isActive("/patient/MisCitas"),t.isActive("/patient/MisCitas")))}},dependencies:[M,dt,F,pt,ne],styles:[".color[_ngcontent-%COMP%]{background:#000;min-height:100vh}.btn-secondary[_ngcontent-%COMP%]{background-color:#444040}"]})};function It(o,r){if(o&1&&(n(0,"div",48)(1,"h2",49),a(2,"Informacion de emergencia"),i(),n(3,"p",50),a(4),i(),n(5,"p",50),a(6),i(),n(7,"p",50),a(8),i(),n(9,"p",50),a(10),i()()),o&2){let e=_();s(4),k("Nombre contacto: ",e.emergencyInfo.name,""),s(2),k("Parentesco: ",e.emergencyInfo.parent,""),s(2),k("Domicilio: ",e.emergencyInfo.dir,""),s(2),k("Telefono: ",e.emergencyInfo.phone,"")}}function Mt(o,r){o&1&&(n(0,"div",48)(1,"h2",51),a(2,"Informacion de emergencia"),i(),n(3,"p",52),a(4,"No tienes informacion de emergencia registrada!!"),i(),n(5,"div",53)(6,"button",54),a(7," Agregar informacion "),i()()())}function Et(o,r){o&1&&(n(0,"div",55)(1,"p",56),a(2,"El parentesco es requerido."),i()())}function St(o,r){o&1&&(n(0,"div",55)(1,"p",56),a(2,"Por favor, especifique el parentesco."),i()())}function zt(o,r){if(o&1&&(n(0,"div",57)(1,"label",58),a(2,"Especificar parentesco"),i(),p(3,"input",59),h(4,St,3,0,"div",36),i()),o&2){let e,t=_();s(4),d("ngIf",((e=t.emergencyForm.get("otherRelationship"))==null?null:e.invalid)&&((e=t.emergencyForm.get("otherRelationship"))==null?null:e.touched))}}function xt(o,r){o&1&&(n(0,"div",60)(1,"p",61),a(2,"El nombre es requerido"),i()())}function wt(o,r){o&1&&(n(0,"div",60)(1,"p",61),a(2,"La Direcci\xF3n es requerido"),i()())}function kt(o,r){o&1&&(n(0,"span"),a(1,"El tel\xE9fono es requerido."),i())}function Dt(o,r){o&1&&(n(0,"span"),a(1,"El tel\xE9fono solo debe contener n\xFAmeros."),i())}function Ft(o,r){o&1&&(n(0,"span"),a(1," El tel\xE9fono debe tener exactamente 9 d\xEDgitos. "),i())}function Lt(o,r){if(o&1&&(n(0,"div",55)(1,"p",61),h(2,kt,2,0,"span",62)(3,Dt,2,0,"span",62)(4,Ft,2,0,"span",62),i()()),o&2){let e,t,l,c=_();s(2),d("ngIf",(e=c.emergencyForm.get("phone"))==null?null:e.hasError("required")),s(),d("ngIf",(t=c.emergencyForm.get("phone"))==null?null:t.hasError("pattern")),s(),d("ngIf",((l=c.emergencyForm.get("phone"))==null?null:l.hasError("minlength"))||((l=c.emergencyForm.get("phone"))==null?null:l.hasError("maxlength")))}}var we=class o{paciente;edad=0;patienService=g(H);authService=g(re);snackbar=g(N);router=g(E);fb=g(K);emergencyInfo;emergencyForm;showOtherRelationship=!1;existEmergencyInfo=!1;ngOnInit(){let e=this.authService.getUser()?.id;this.emergencyForm=this.fb.group({parent:["",m.required],name:["",m.required],dir:["",m.required],phone:["",[m.required,m.maxLength(9),m.minLength(9),m.pattern(/^[0-9]+$/)]],otherRelationship:[""]}),e&&this.patienService.getUserbyID(e).subscribe({next:t=>{this.paciente=t,this.edad=this.calculateAge(t.birthday),this.showSnackBar("Perfil cargado con \xE9xito.")},error:t=>{this.showSnackBar("Error al cargar el perfil")}}),this.patienService.getEmercenCyInfo().subscribe({next:t=>{this.emergencyInfo=t,this.existEmergencyInfo=!0},error:()=>{console.log("Error al cargar la informacion de emergencia")}})}showSnackBar(r){this.snackbar.open(r,"Close",{duration:2e3,verticalPosition:"top"})}calculateAge(r){let e=new Date(r),t=new Date,l=t.getFullYear()-e.getFullYear(),c=t.getMonth()-e.getMonth();return(c<0||c===0&&t.getDate()<e.getDate())&&l--,l}Editar(r){this.router.navigate(["patient/actualizar"])}onRelationshipChange(r){let e=r.target.value;this.showOtherRelationship=e==="Otro",this.showOtherRelationship?this.emergencyForm.get("otherRelationship")?.setValidators(m.required):(this.emergencyForm.get("otherRelationship")?.clearValidators(),this.emergencyForm.get("otherRelationship")?.reset()),this.emergencyForm.get("otherRelationship")?.updateValueAndValidity()}onSubmit(){if(this.emergencyForm.valid){console.log("Formulario v\xE1lido y listo para enviar:",this.emergencyForm.value);let r=P({},this.emergencyForm.value);this.emergencyForm.value.parent==="Otro"&&(r.parent=this.emergencyForm.value.otherRelationship,delete r.otherRelationship),console.log("datos a enviar:",r),this.patienService.createEmergencyInfo(r).subscribe({next:()=>{this.showSnackBar("Informaci\xF3n de emergencia registrada exitosamente."),this.existEmergencyInfo=!0,this.patienService.getEmercenCyInfo().subscribe({next:e=>{this.emergencyInfo=e,this.existEmergencyInfo=!0},error:()=>{console.log("Error al cargar la informacion de emergencia")}})},error:e=>{let t=e.error.error||"Ocurri\xF3 un error al registrar la informaci\xF3n";console.log("Error:",t),this.showSnackBar(t)}})}this.router.navigate(["/patient"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-profile"]],standalone:!0,features:[b],decls:86,vars:16,consts:[["Create",""],[1,"row","p-4"],[1,"div","bg-black","text-light","p-4"],[1,"row","align-items-center","p-4"],[1,"col-md-1","p-0","text-center"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","Profile Image",1,"img-thumbnail","rounded-circle"],[1,"col-md-10"],[1,"ms-3"],[1,"row"],[1,"col","offset-md-10"],[1,"btn","btn-outline-light",3,"click"],[1,"col-md-8"],[1,"row","m-4"],[1,"col-md-4","ms-4"],[1,"fs-4"],[1,"col-md-4"],[1,"col-md-2"],[1,"card","h-100","m-4","center"],["class","card-body m-3",4,"ngIf","ngIfElse"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","parent"],["id","parent","formControlName","parent",1,"form-select","border","border-black",3,"change"],["value","","disabled","","selected",""],["value","Padre"],["value","Madre"],["value","Hermano"],["value","Hijo"],["value","Otro"],["class","text-danger",4,"ngIf"],["class","form-group mt-3",4,"ngIf"],["for","name",1,"mt-3"],["type","text","id","name","formControlName","name","placeholder","Nombre",1,"form-control","border","border-black"],["class","error",4,"ngIf"],["for","dir",1,"mt-3"],["type","text","id","dir","formControlName","dir","placeholder","Direcci\xF3n",1,"form-control","border","border-black"],["for","phone",1,"mt-3"],["type","tel","id","phone","formControlName","phone","placeholder","Tel\xE9fono","maxlength","9","pattern","[0-9]*","inputmode","numeric",1,"form-control","border","border-black"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-dark",3,"click","disabled"],[1,"card-body","m-3"],[1,"fw-bold","fs-4"],[1,"card-text"],[1,"fw-bold","fs-4","text-center"],[1,"text-danger","text-center"],[1,"d-flex","justify-content-center"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-dark","p-2","rounded-pill","btn-lg"],[1,"text-danger"],[1,"fs-6"],[1,"form-group","mt-3"],["for","otherRelationship"],["type","text","id","otherRelationship","formControlName","otherRelationship","placeholder","Especifique el parentesco",1,"form-control","border","border-black"],[1,"error"],[1,"text-danger","fs-6"],[4,"ngIf"]],template:function(e,t){if(e&1){let l=z();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),p(4,"img",5),i(),n(5,"div",6)(6,"h3",7),a(7),i()()(),n(8,"div",8)(9,"div",9)(10,"button",10),f("click",function(){return C(l),I(t.Editar(t.paciente.userId))}),a(11,"Editar perfil"),i()()()()(),n(12,"div",8)(13,"div",11)(14,"div",12)(15,"h1"),a(16,"Sobre m\xED :"),i()(),n(17,"div",12)(18,"div",13)(19,"p",14),a(20),i()(),n(21,"div",15)(22,"p",14),a(23),i()(),n(24,"div",16)(25,"p",14),a(26),i()()(),n(27,"div",12)(28,"div",13)(29,"p",14),a(30),i()(),n(31,"div",15)(32,"p",14),a(33),i()()()(),n(34,"div",15)(35,"div",17),h(36,It,11,4,"div",18)(37,Mt,8,0,"ng-template",null,0,R),i()()(),n(39,"div",19)(40,"div",20)(41,"div",21)(42,"div",22)(43,"h1",23),a(44,"Registro de Informacion"),i(),p(45,"button",24),i(),n(46,"div",25)(47,"form",26),f("ngSubmit",function(){return C(l),I(t.onSubmit())}),n(48,"div",27)(49,"label",28),a(50,"Tipo de parentesco"),i(),n(51,"select",29),f("change",function(u){return C(l),I(t.onRelationshipChange(u))}),n(52,"option",30),a(53,"Seleccione el parentesco"),i(),n(54,"option",31),a(55,"Padre"),i(),n(56,"option",32),a(57,"Madre"),i(),n(58,"option",33),a(59,"Hermano"),i(),n(60,"option",34),a(61,"Hijo"),i(),n(62,"option",35),a(63,"Otro"),i()(),h(64,Et,3,0,"div",36),i(),h(65,zt,5,1,"div",37),n(66,"div",27)(67,"label",38),a(68,"Nombre"),i(),p(69,"input",39),i(),h(70,xt,3,0,"div",40),n(71,"div",27)(72,"label",41),a(73,"Direcci\xF3n"),i(),p(74,"input",42),i(),h(75,wt,3,0,"div",40),n(76,"div",27)(77,"label",43),a(78,"Tel\xE9fono"),i(),p(79,"input",44),i(),h(80,Lt,5,3,"div",36),i()(),n(81,"div",45)(82,"button",46),a(83,"Close"),i(),n(84,"button",47),f("click",function(){return C(l),I(t.onSubmit())}),a(85," Enviar "),i()()()()()}if(e&2){let l,c,u,S,x=w(38);s(7),D("",t.paciente.name," ",t.paciente.lastname,""),s(13),v(t.paciente.gender),s(3),k("",t.edad," a\xF1os"),s(3),v(t.paciente.phone),s(4),v(t.paciente.birthday),s(3),v(t.paciente.email),s(3),d("ngIf",t.existEmergencyInfo===!0)("ngIfElse",x),s(11),d("formGroup",t.emergencyForm),s(17),d("ngIf",((l=t.emergencyForm.get("parent"))==null?null:l.invalid)&&((l=t.emergencyForm.get("parent"))==null?null:l.touched)),s(),d("ngIf",t.showOtherRelationship),s(5),d("ngIf",((c=t.emergencyForm.get("name"))==null?null:c.invalid)&&((c=t.emergencyForm.get("name"))==null?null:c.touched)),s(5),d("ngIf",((u=t.emergencyForm.get("dir"))==null?null:u.invalid)&&((u=t.emergencyForm.get("dir"))==null?null:u.touched)),s(5),d("ngIf",((S=t.emergencyForm.get("phone"))==null?null:S.invalid)&&((S=t.emergencyForm.get("phone"))==null?null:S.touched)),s(4),d("disabled",t.emergencyForm.invalid)}},dependencies:[M,F,A,j,Q,$,Z,W,T,q,Me,Ee,Y,V,G],styles:[".center[_ngcontent-%COMP%]{display:flex!important;justify-content:center!important}"]})};var Ot=["*"],me=class{_clearListeners(){for(let r of this._listeners)r.remove();this._listeners=[]}constructor(r){this._ngZone=r,this._pending=[],this._listeners=[],this._targetStream=new be(void 0)}getLazyEmitter(r){return this._targetStream.pipe(We(e=>{let t=new je(l=>{if(!e){this._pending.push({observable:t,observer:l});return}let c=e.addListener(r,u=>{this._ngZone.run(()=>l.next(u))});if(!c){l.complete();return}return this._listeners.push(c),()=>c.remove()});return t}))}setTarget(r){let e=this._targetStream.value;r!==e&&(e&&(this._clearListeners(),this._pending=[]),this._targetStream.next(r),this._pending.forEach(t=>t.observable.subscribe(t.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},ce={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},ut="500px",ft="500px",De=(()=>{class o{set center(e){this._center=e}set zoom(e){this._zoom=e}set options(e){this._options=e||ce}constructor(e,t,l){if(this._elementRef=e,this._ngZone=t,this._eventManager=new me(g(B)),this.height=ut,this.width=ft,this._options=ce,this.mapInitialized=new de,this.authFailure=new de,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=mt(l),this._isBrowser){let c=window;c.google,this._existingAuthFailureCallback=c.gm_authFailure,c.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(e){(e.height||e.width)&&this._setSize();let t=this.googleMap;t&&(e.options&&t.setOptions(this._combineOptions()),e.center&&this._center&&t.setCenter(this._center),e.zoom&&this._zoom!=null&&t.setZoom(this._zoom),e.mapTypeId&&this.mapTypeId&&t.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(e=>this._initialize(e.Map))}))}_initialize(e){this._ngZone.runOutsideAngular(()=>{this.googleMap=new e(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let e=window;e.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(e,t){this._assertInitialized(),this.googleMap.fitBounds(e,t)}panBy(e,t){this._assertInitialized(),this.googleMap.panBy(e,t)}panTo(e){this._assertInitialized(),this.googleMap.panTo(e)}panToBounds(e,t){this._assertInitialized(),this.googleMap.panToBounds(e,t)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(He(1)).toPromise()}_setSize(){if(this._mapEl){let e=this._mapEl.style;e.height=this.height===null?"":_t(this.height)||ut,e.width=this.width===null?"":_t(this.width)||ft}}_combineOptions(){let e=this._options||{};return ye(P({},e),{center:this._center||e.center||ce.center,zoom:this._zoom??e.zoom??ce.zoom,mapTypeId:this.mapTypeId||e.mapTypeId||ce.mapTypeId,mapId:this.mapId||e.mapId})}_assertInitialized(){this.googleMap}static{this.\u0275fac=function(t){return new(t||o)(L(qe),L(B),L(Qe))}}static{this.\u0275cmp=y({type:o,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],standalone:!0,features:[Ze,b],ngContentSelectors:Ot,decls:2,vars:0,consts:[[1,"map-container"]],template:function(t,l){t&1&&(tt(),p(0,"div",0),it(1))},encapsulation:2,changeDetection:0})}}return o})(),Pt=/([A-Za-z%]+)$/;function _t(o){return o==null?"":Pt.test(o)?o:`${o}px`}var Fe=(()=>{class o{set options(e){this._options.next(e||{})}set position(e){this._position.next(e)}constructor(e,t,l){this._googleMap=e,this._elementRef=t,this._ngZone=l,this._eventManager=new me(g(B)),this._options=new be({}),this._position=new be(void 0),this._destroy=new ae,this.closeclick=this._eventManager.getLazyEmitter("closeclick"),this.contentChanged=this._eventManager.getLazyEmitter("content_changed"),this.domready=this._eventManager.getLazyEmitter("domready"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed"),this.infoWindowInitialized=new de}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(He(1)).subscribe(e=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,e):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>{this._initialize(t.InfoWindow,e)})})})}_initialize(e,t){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new e(t),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(e,t){this.open({getAnchor:()=>e},void 0,t)}open(e,t,l){this._assertInitialized();let c=e?e.getAnchor():void 0;(this.infoWindow.get("anchor")!==c||!c)&&(this._elementRef.nativeElement.style.display="",l&&this.infoWindow.setContent(l),this.infoWindow.open({map:this._googleMap.googleMap,anchor:c,shouldFocus:t}))}_combineOptions(){return Ge([this._options,this._position]).pipe(Ve(([e,t])=>ye(P({},e),{position:t||e.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(Ue(this._destroy)).subscribe(e=>{this._assertInitialized(),this.infoWindow.setOptions(e)})}_watchForPositionChanges(){this._position.pipe(Ue(this._destroy)).subscribe(e=>{e&&(this._assertInitialized(),this.infoWindow.setPosition(e))})}_assertInitialized(){}static{this.\u0275fac=function(t){return new(t||o)(L(De),L(qe),L(B))}}static{this.\u0275dir=Be({type:o,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"],standalone:!0})}}return o})();var Rt={position:{lat:37.221995,lng:-122.184092}},vt=(()=>{class o{set title(e){this._title=e}set position(e){this._position=e}set content(e){this._content=e}set gmpDraggable(e){this._draggable=e}set options(e){this._options=e}set zIndex(e){this._zIndex=e}constructor(e,t){this._googleMap=e,this._ngZone=t,this._eventManager=new me(g(B)),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.markerInitialized=new de}ngOnInit(){this._googleMap._isBrowser&&(google.maps.marker?.AdvancedMarkerElement&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.marker.AdvancedMarkerElement):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([e,t])=>{this._initialize(e,t.AdvancedMarkerElement)})}))}_initialize(e,t){this._ngZone.runOutsideAngular(()=>{this.advancedMarker=new t(this._combineOptions()),this._assertInitialized(),this.advancedMarker.map=e,this._eventManager.setTarget(this.advancedMarker),this.markerInitialized.next(this.advancedMarker)})}ngOnChanges(e){let{advancedMarker:t,_content:l,_position:c,_title:u,_draggable:S,_zIndex:x}=this;t&&(e.title&&(t.title=u),e.gmpDraggable&&(t.gmpDraggable=S),e.content&&(t.content=l),e.position&&(t.position=c),e.zIndex&&(t.zIndex=x))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.advancedMarker&&(this.advancedMarker.map=null)}getAnchor(){return this._assertInitialized(),this.advancedMarker}_combineOptions(){let e=this._options||Rt;return ye(P({},e),{title:this._title||e.title,position:this._position||e.position,content:this._content||e.content,zIndex:this._zIndex??e.zIndex,gmpDraggable:this._draggable??e.gmpDraggable,map:this._googleMap.googleMap})}_assertInitialized(){}static{this.\u0275fac=function(t){return new(t||o)(L(De),L(B))}}static{this.\u0275dir=Be({type:o,selectors:[["map-advanced-marker"]],inputs:{title:"title",position:"position",content:"content",gmpDraggable:"gmpDraggable",options:"options",zIndex:"zIndex"},outputs:{mapClick:"mapClick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",markerInitialized:"markerInitialized"},exportAs:["mapAdvancedMarker"],standalone:!0,features:[Ze]})}}return o})();var Tt=(o,r)=>({lat:o,lng:r});function At(o,r){if(o&1){let e=z();n(0,"map-advanced-marker",3,0),f("mapClick",function(){let l=C(e).$implicit,c=w(1),u=_();return I(u.MarkerClick(l,c))}),i()}if(o&2){let e=r.$implicit;d("position",ee(1,Tt,+e.latitude,+e.longitude))}}var Le=class o{clinicas=[];clinicService=g(J);center={lat:-8.1285703,lng:-79.0326985};zoom=16;infoWindowRef=$e.required(Fe);router=g(E);ngOnInit(){localStorage.removeItem("selectedClinicId"),localStorage.removeItem("selectedDentistId"),this.clinicService.getAllClinics().subscribe({next:r=>{this.clinicas=r,console.log(this.clinicas)},error:r=>console.log("Error al cargar las clinicas",r)})}MarkerClick(r,e){let t=`
  <div class = "row-md-4">
  <h5 class = "fw-bold">${r.name}</h5>
  <p>${r.desc}</p>
  <p>Horario: ${r.openHour} - ${r.closeHour}</p>
  <p>Dias: ${r.openDays}</p>
  <button class ="btn btn-primary" id="selectClinicaButton">Seleccionar</button>
  <div>`;this.infoWindowRef().open(e,!1,t),setTimeout(()=>{let l=document.getElementById("selectClinicaButton");l&&l.addEventListener("click",()=>{localStorage.setItem("selectedClinicId",r.id.toString()),r.id===1?this.router.navigate(["patient/cita/dentistas"]):this.router.navigate(["patient/cita/dentistas/dentista"])})},0)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-cita-layout"]],viewQuery:function(e,t){e&1&&nt(t.infoWindowRef,Fe,5),e&2&&rt()},standalone:!0,features:[b],decls:4,vars:2,consts:[["marker","mapAdvancedMarker"],["mapId","f647ae78466faec3","height","100%","width","100%",3,"center","zoom"],[3,"position"],[3,"mapClick","position"]],template:function(e,t){e&1&&(n(0,"google-map",1),Ye(1,At,2,4,"map-advanced-marker",2,Ke),p(3,"map-info-window"),i()),e&2&&(d("center",t.center)("zoom",t.zoom),s(),Je(t.clinicas))},dependencies:[M,De,vt,Fe]})};function Nt(o,r){if(o&1&&(n(0,"option",29),a(1),i()),o&2){let e=r.$implicit;d("value",e),s(),v(e)}}function Ht(o,r){if(o&1){let e=z();n(0,"div",30)(1,"button",31),f("click",function(){let l=C(e).$implicit,c=_();return I(c.DentistDetails(l.userId))}),p(2,"img",32),a(3),i()()}if(o&2){let e=r.$implicit;s(3),D(" ",e.name," ",e.lastname,"")}}var Oe=class o{clinicId="";clinica;dentistas=[];filterDentist=[];cycles=[5,6,7,8,9,10];searchQuery="";clinicService=g(J);router=g(E);ngOnInit(){this.clinicId=localStorage.getItem("selectedClinicId")||"",this.clinicService.getClinicById(+this.clinicId).subscribe({next:r=>{this.clinica=r,this.dentistas=r.dentists,this.filterDentist=r.dentists,console.log(this.clinica),console.log(this.dentistas)},error:r=>console.log("Error al cargar la clinica",r)})}onSearch(){let r=Number(this.searchQuery);this.searchQuery?this.filterDentist=this.dentistas.filter(e=>e.cicle===r):this.filterDentist=this.dentistas}clearFilter(){this.searchQuery="",this.filterDentist=[...this.dentistas]}DentistDetails(r){localStorage.setItem("selectedDentistId",r.toString()),console.log("id seleccionado: ",r),this.router.navigate(["patient/cita/dentistas/dentista"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-List-of-Dentist"]],standalone:!0,features:[b],decls:42,vars:10,consts:[[1,"row-md-2","p-3"],["routerLink","/patient/cita",1,"btn","fs-3","hover"],[1,"fa-solid","fa-arrow-left"],[1,"row","ms-4"],[1,"col-md-5","ms-4","mt-4","me-5"],[1,"row","mb-4"],[1,"col-md-4","text-light","bg-black","p-3"],["src","https://scontent-lim1-1.xx.fbcdn.net/v/t39.30808-6/414850126_407251714969818_7350880059826478217_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=mGzQKTe_oaQQ7kNvgHnhY2y&_nc_zt=23&_nc_ht=scontent-lim1-1.xx&_nc_gid=AbyMQNGM9CAo6rKemP6W0TW&oh=00_AYCEiKoGAzxZEz-HufBnroFbJQs40nSp2_QAs3N_h5h-Ag&oe=6737D7D0",1,"img-thumbnail","rounded-circle"],[1,"col-md-8","text-light","bg-black","p-3"],[1,"card-title","fs-1"],[1,"text-white-50","card-title","fw-light"],[1,"card-text","p-3","fs-5"],[2,"width","30rem"],[1,"card-body","row","bg-black","text-light","p-3"],[1,"col-md-12","p-3"],[1,"card-title","fs-3"],[1,"text-white-50","card-title","fw-light","p-3"],[1,"fa-solid","fa-location-dot",2,"color","#ffffff"],[1,"fa-solid","fa-envelope",2,"color","#ffffff"],[1,"fa-solid","fa-phone",2,"color","#ffffff"],[1,"fa-solid","fa-clock",2,"color","#ffffff"],[1,"col-md-4","offset-md-1"],[1,"row"],["role","search",1,"d-flex","p-2"],[1,"form-select","me-2","rounded-pill","border","border-3","p-3",3,"ngModelChange","ngModel"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn-close","mt-1",3,"click"],["class","row m-6",4,"ngFor","ngForOf"],[3,"value"],[1,"row","m-6"],[1,"btn","btn-outline-dark","font-monospace","text-start","fs-5","m-2",3,"click"],["src","https://scontent-lim1-1.xx.fbcdn.net/v/t39.30808-6/414850126_407251714969818_7350880059826478217_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=mGzQKTe_oaQQ7kNvgHnhY2y&_nc_zt=23&_nc_ht=scontent-lim1-1.xx&_nc_gid=AbyMQNGM9CAo6rKemP6W0TW&oh=00_AYCEiKoGAzxZEz-HufBnroFbJQs40nSp2_QAs3N_h5h-Ag&oe=6737D7D0",1,"img-thumbnail","small-thumbnail","rounded-circle"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"button",1),p(2,"i",2),a(3," Volver"),i()(),n(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),p(8,"img",7),i(),n(9,"div",8)(10,"h5",9),a(11),i(),n(12,"h5",10),a(13,"Consultorio"),i()(),n(14,"p",11),a(15),i()(),n(16,"div",12)(17,"div",13)(18,"div",14)(19,"h5",15),a(20,"Acerca de: "),i(),n(21,"h5",16),p(22,"i",17),a(23),i(),n(24,"h5",16),p(25,"i",18),a(26),i(),n(27,"h5",16),p(28,"i",19),a(29),i(),n(30,"h5",16),p(31,"i",20),a(32),i()()()()(),n(33,"div",21)(34,"div",22)(35,"div",23)(36,"select",24),st("ngModelChange",function(c){return at(t.searchQuery,c)||(t.searchQuery=c),c}),f("ngModelChange",function(){return t.onSearch()}),n(37,"option",25),a(38,"Seleccione ciclo de estudios"),i(),h(39,Nt,2,2,"option",26),i(),n(40,"button",27),f("click",function(){return t.clearFilter()}),i()()(),h(41,Ht,4,2,"div",28),i()()),e&2&&(s(11),v(t.clinica.name),s(4),v(t.clinica.desc),s(8),k(" ",t.clinica.address,""),s(3),k(" ",t.clinica.email,""),s(3),k(" ",t.clinica.telf,""),s(3),D(" ",t.clinica.openHour," - ",t.clinica.closeHour,""),s(4),ot("ngModel",t.searchQuery),s(3),d("ngForOf",t.cycles),s(2),d("ngForOf",t.filterDentist))},dependencies:[M,Ce,ne,A,Q,$,W,T,ht],styles:[".hover[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}.small-thumbnail[_ngcontent-%COMP%]{width:120px!important;height:120px!important}"]})};var Ut=o=>({color:o}),Pe=class o{clinicId="";clinica;dentista;dentistId=null;hover=!1;clinicService=g(J);dentistService=g(gt);router=g(E);ngOnInit(){console.log(localStorage.getItem("selectedDentistId")),localStorage.getItem("selectedDentistId")!=null?(this.dentistId=parseInt(localStorage.getItem("selectedDentistId")||"",10),console.log("id seleccionado: ",this.dentistId),this.clinicId=localStorage.getItem("selectedClinicId")||"",this.clinicService.getClinicById(+this.clinicId).subscribe({next:r=>{this.clinica=r,console.log(r)},error:r=>console.log("Error al cargar la clinica",r)}),this.fetchDentistDetails(this.dentistId)):(this.clinicId=localStorage.getItem("selectedClinicId")||"",this.clinicService.getClinicById(+this.clinicId).subscribe({next:r=>{this.clinica=r,console.log(r),this.clinica.dentists&&this.clinica.dentists.length>0&&(this.dentistId=this.clinica.dentists[0].userId,this.fetchDentistDetails(this.dentistId))},error:r=>console.log("Error al cargar la clinica",r)})),localStorage.removeItem("selectedDentistId")}fetchDentistDetails(r){this.dentistService.getUserbyID(r).subscribe({next:e=>{this.dentista=e,console.log(e)},error:e=>console.log("Error al cargar el dentista",e)})}Volver(){+this.clinicId==1?this.router.navigate(["patient/cita/dentistas"]):this.router.navigate(["patient/cita"])}IrCreateCita(r,e){localStorage.setItem("selectedClinicId",e.toString()),localStorage.setItem("selectedDentistId",r.toString()),this.router.navigate(["patient/cita/dentistas/dentista/detallesCita"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-dentist-details"]],standalone:!0,features:[b],decls:50,vars:14,consts:[[1,"row-md-2","p-3"],[1,"btn","fs-3","hover",3,"click"],[1,"fa-solid","fa-arrow-left"],[1,"row","p-4"],[1,"div","bg-black","text-light","p-4"],[1,"row","align-items-center","p-4"],[1,"col-md-1","p-0","text-center"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","Profile Image",1,"img-thumbnail","rounded-circle"],[1,"col-md-10"],[1,"row"],[1,"ms-3","fs-1"],[1,"ms-3","fs-4","text-white-50"],[1,"container","row"],[1,"col","offset-md-10"],[1,"ms-5","btn","btn-outline-light","p-2",3,"mouseenter","mouseleave","click"],[1,"fa-solid","fa-arrow-up-right-from-square",3,"ngStyle"],[1,"col-md-4"],[1,"row","m-4","bg-black","rounded","p-4","text-white-50"],[1,"fs-4","text-light"],[1,"fs-6"],[1,"row","m-4","border","border-start-0","border-end-0","border-top-0","border-black","border-3s"],[1,"fs-4"],[1,"card","m-4","border","border-3"],[1,"card-body","m-3"],[1,"fw-bold","fs-3"],[1,"card-text"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"button",1),f("click",function(){return t.Volver()}),p(2,"i",2),a(3," Volver"),i()(),n(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),p(8,"img",7),i(),n(9,"div",8)(10,"div",9)(11,"h3",10),a(12),i()(),n(13,"div",9)(14,"h3",11),a(15),i()()()(),n(16,"div",12)(17,"div",13)(18,"button",14),f("mouseenter",function(){return t.hover=!0})("mouseleave",function(){return t.hover=!1})("click",function(){return t.IrCreateCita(t.dentista.id,t.clinica.id)}),a(19," Agendar Cita "),p(20,"i",15),i()()()()(),n(21,"div",9)(22,"div",16)(23,"div",17)(24,"h1",18),a(25,"Sobre m\xED :"),i(),n(26,"p",19),a(27),i(),n(28,"p",19),a(29),i(),n(30,"p",19),a(31),i(),n(32,"p",19),a(33),i(),n(34,"p",19),a(35),i(),n(36,"p",19),a(37),i()()(),n(38,"div",16)(39,"div",20)(40,"h1",21),a(41,"Publicaciones"),i()(),p(42,"div",17),i(),n(43,"div",16)(44,"div",22)(45,"div",23)(46,"h2",24),a(47,"Descripcion"),i(),n(48,"p",25),a(49),i()()()()()),e&2&&(s(12),D("",t.dentista.name," ",t.dentista.lastname,""),s(3),k("Dentista ",t.dentista.condition,""),s(5),d("ngStyle",lt(12,Ut,t.hover?"#000000":"#ffffff")),s(7),v(t.dentista.gender),s(2),v(t.dentista.birthday),s(2),v(t.clinica.address),s(2),v(t.dentista.email),s(2),v(t.dentista.phone),s(2),D("",t.clinica.openHour," - ",t.clinica.closeHour,""),s(12),v(t.dentista.description))},dependencies:[M,ct],styles:[".btn-outline-light[_ngcontent-%COMP%]{color:#fff;border-color:#fff;transition:color .3s,border-color .3s}.btn-outline-light[_ngcontent-%COMP%]:hover{color:#000;border-color:#000}.hover[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}"]})};var oe=class o{baseURL=`${Se.baseURL}/citas`;http=g(Ie);constructor(){}createCita(r){return this.http.post(`${this.baseURL}/create`,r)}myCitas(){return this.http.get(`${this.baseURL}/propias`)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=le({token:o,factory:o.\u0275fac,providedIn:"root"})};function Bt(o,r){o&1&&(n(0,"small"),a(1,"La fecha es obligatoria."),i())}function Zt(o,r){if(o&1&&(n(0,"div",21),h(1,Bt,2,0,"small",22),i()),o&2){let e=_();s(),d("ngIf",e.date==null?null:e.date.hasError("required"))}}function qt(o,r){o&1&&(n(0,"small"),a(1,"La hora es obligatoria."),i())}function jt(o,r){if(o&1&&(n(0,"div",21),h(1,qt,2,0,"small",22),i()),o&2){let e=_();s(),d("ngIf",e.hour==null?null:e.hour.hasError("required"))}}function Vt(o,r){o&1&&(n(0,"small"),a(1,"El motivo es obligatorio."),i())}function Gt(o,r){o&1&&(n(0,"small"),a(1,"El motivo no puede tener m\xE1s de 255 caracteres."),i())}function Wt(o,r){if(o&1&&(n(0,"div",21),h(1,Vt,2,0,"small",22)(2,Gt,2,0,"small",22),i()),o&2){let e=_();s(),d("ngIf",e.reason==null?null:e.reason.hasError("required")),s(),d("ngIf",e.reason==null?null:e.reason.hasError("maxlength"))}}function Qt(o,r){o&1&&(n(0,"div",23),a(1," \xA1La solicitud de cita ha sido enviada correctamente! "),i())}var Re=class o{constructor(r){this.fb=r}clinicresponse;quoteForm;clinicId=0;selectedDentistId=0;submitSuccess=!1;router=g(E);citaService=g(oe);clinicaService=g(J);snackbar=g(N);minDate="";clinicOpenHour="";clinicCloseHour="";clinicOpenDays=[];ngOnInit(){console.log(localStorage.getItem("selectedDentistId")),this.clinicId=parseInt(localStorage.getItem("selectedClinicId")||"",10),localStorage.getItem("selectedDentistId")!=null&&(this.selectedDentistId=parseInt(localStorage.getItem("selectedDentistId")||"",10)),this.clinicaService.getClinicById(this.clinicId).subscribe({next:e=>{this.clinicresponse=e,this.clinicOpenHour=e.openHour,this.clinicCloseHour=e.closeHour,this.clinicOpenDays=e.openDays,console.log("Clinica obtenido correctamente")},error:e=>{console.log("Error al obtener la clinica",e.error.message)}}),this.quoteForm=this.fb.group({reason:["",[m.required,m.maxLength(255)]],date:["",m.required],hour:["",m.required]});let r=new Date;r.setHours(0,0,0,0),this.minDate=r.toISOString().split("T")[0]}get reason(){return this.quoteForm.get("reason")}get date(){return this.quoteForm.get("date")}get hour(){return this.quoteForm.get("hour")}onSubmit(){if(this.quoteForm.valid&&this.validateAppointment()){console.log("Formulario v\xE1lido y listo para enviar:",this.quoteForm.value);let r={dentistId:this.selectedDentistId,reason:this.quoteForm.value.reason,date:this.quoteForm.value.date,hour:this.quoteForm.value.hour};this.citaService.createCita(r).subscribe({next:()=>{this.showSnackBar("Cita creada exitosamente."),this.router.navigate(["/patient/MisCitas"]),this.submitSuccess=!0},error:e=>{let t=e.error["error:"]||"Ocurri\xF3 un error al crear la cita";console.log("Error al crear la cita:",t),this.showSnackBar(t)}})}}Volver(){this.router.navigate(["patient/cita/dentista"])}showSnackBar(r){this.snackbar.open(r,"Close",{duration:2e3,verticalPosition:"top"})}validateAppointment(){let r=this.date?.value,e=this.hour?.value;if(!r||!e)return!1;let l=new Date(r).toLocaleString("en-US",{weekday:"long"}).toUpperCase();return this.clinicOpenDays.includes(l)?e<this.clinicOpenHour||e>this.clinicCloseHour?(this.showSnackBar("La cl\xEDnica solo atiende entre las "+this.clinicOpenHour+" y "+this.clinicCloseHour+"."),!1):new Date(`${r}T${e}`)<=new Date?(this.showSnackBar("La fecha y hora de la cita deben ser en el futuro."),!1):!0:(this.showSnackBar("La cl\xEDnica no abre en el d\xEDa seleccionado."),!1)}static \u0275fac=function(e){return new(e||o)(L(K))};static \u0275cmp=y({type:o,selectors:[["app-cita-details"]],standalone:!0,features:[b],decls:38,vars:6,consts:[[1,"row-md-2","p-3"],[1,"btn","fs-3","hover",3,"click"],[1,"fa-solid","fa-arrow-left"],[1,"container-fluid","fondo"],[1,"ini"],[1,"row"],[1,"col-md-8"],[1,"col-md-4"],["src","muela.png"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","date"],["id","date","type","date","formControlName","date",1,"form-control",3,"min"],["class","text-danger",4,"ngIf"],["for","hour"],["id","hour","type","time","formControlName","hour",1,"form-control"],["for","reason"],["id","reason","rows","3","formControlName","reason","placeholder","Ingrese el motivo",1,"form-control"],[1,"col","d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-dark","p-2","rounded-pill","fw-bold","fs-5","btn-lg"],["class","alert alert-success mt-3",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],[1,"alert","alert-success","mt-3"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"button",1),f("click",function(){return t.Volver()}),p(2,"i",2),a(3," Volver"),i()(),n(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h1"),a(9,"Smile "),n(10,"strong"),a(11,"App"),i()()(),n(12,"div",7),p(13,"img",8),i()(),n(14,"div",5)(15,"h2"),a(16,"Agendar Cita"),i(),n(17,"form",9),f("ngSubmit",function(){return t.onSubmit()}),n(18,"div",10)(19,"label",11),a(20,"Fecha"),i(),p(21,"input",12),h(22,Zt,2,1,"div",13),i(),n(23,"div",10)(24,"label",14),a(25,"Hora"),i(),p(26,"input",15),h(27,jt,2,1,"div",13),i(),n(28,"div",10)(29,"label",16),a(30,"Motivo"),i(),n(31,"textarea",17),a(32,"          "),i(),h(33,Wt,3,2,"div",13),i(),n(34,"div",18)(35,"button",19),a(36,"Agendar Cita"),i()()(),h(37,Qt,2,0,"div",20),i()()()),e&2&&(s(17),d("formGroup",t.quoteForm),s(4),d("min",t.minDate),s(),d("ngIf",(t.date==null?null:t.date.invalid)&&(t.date==null?null:t.date.touched)),s(5),d("ngIf",(t.hour==null?null:t.hour.invalid)&&(t.hour==null?null:t.hour.touched)),s(6),d("ngIf",(t.reason==null?null:t.reason.invalid)&&(t.reason==null?null:t.reason.touched)),s(4),d("ngIf",t.submitSuccess))},dependencies:[M,F,A,j,Z,T,q,Y,V,G],styles:[".fondo[_ngcontent-%COMP%]{font-family:Montserrat;display:flex;justify-content:center;align-items:center}.ini[_ngcontent-%COMP%]{display:flex;max-width:442px;min-height:550px;padding:84px 87px;flex-direction:column;align-items:center;border-radius:30px;background:#fff;box-shadow:0 0 10px #00000080}.ini[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:#444040;margin-bottom:5px}"]})};function $t(o,r){o&1&&p(0,"img",19)}function Kt(o,r){o&1&&p(0,"img",20)}function Yt(o,r){if(o&1&&(n(0,"div",16)(1,"div",17),h(2,$t,1,0,"img",18)(3,Kt,1,0,"ng-template",null,0,R),i(),n(5,"div",3)(6,"div",2)(7,"h3",10),a(8),i()(),n(9,"div",2)(10,"div",3)(11,"p"),a(12),i(),n(13,"p"),a(14),i()(),n(15,"div",5)(16,"p"),a(17),i(),n(18,"p"),a(19),i()()()()()),o&2){let e=r.$implicit,t=w(4);s(2),d("ngIf",e.clinicId===1)("ngIfElse",t),s(6),v(e.clinicname),s(4),D("",e.dentistName," ",e.dentistLastName,""),s(2),v(e.clinicdirection),s(3),v(e.date),s(2),v(e.hour)}}var Te=class o{miscitas=[];filtercitas=[];searchQuery="";citaService=g(oe);router=g(E);ngOnInit(){this.citaService.myCitas().subscribe({next:r=>{this.miscitas=r,this.filtercitas=r,console.log(this.miscitas)},error:r=>console.log("No tienes Citas",r)})}onSearch(){let r=this.searchQuery;this.searchQuery?this.filtercitas=this.miscitas.filter(e=>e.date===r):this.filtercitas=this.miscitas}clearFilter(){this.searchQuery="",this.filtercitas=[...this.miscitas]}filterToday(){let r=new Date().toISOString().split("T")[0];this.filtercitas=this.miscitas.filter(e=>e.date===r)}filterTomorrow(){let r=new Date;r.setDate(r.getDate()+1);let e=r.toISOString().split("T")[0];this.filtercitas=this.miscitas.filter(t=>t.date===e)}filterThisWeek(){let r=new Date,e=new Date(r.setDate(r.getDate()-r.getDay())),t=new Date(r.setDate(r.getDate()+(6-r.getDay())));this.filtercitas=this.miscitas.filter(l=>{let c=new Date(l.date);return c>=e&&c<=t})}filterNextWeek(){let r=new Date,e=new Date(r.setDate(r.getDate()+(7-r.getDay()))),t=new Date(e);t.setDate(t.getDate()+6),this.filtercitas=this.miscitas.filter(l=>{let c=new Date(l.date);return c>=e&&c<=t})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-historial"]],standalone:!0,features:[b],decls:36,vars:1,consts:[["otherImage",""],[1,"container","mt-5"],[1,"row"],[1,"col-md-8"],["class","row ms-5",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card",2,"width","100%"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"col"],[1,"fs-5"],[1,"col-md-2"],[1,"btn-close","mt-1",3,"click"],[1,"d-grid","gap-2"],[1,"btn","btn-outline-dark",3,"click"],[1,"row","mt-3"],[1,"row","ms-5"],[1,"col-md-3","ms-3"],["src","https://scontent-lim1-1.xx.fbcdn.net/v/t39.30808-6/414850126_407251714969818_7350880059826478217_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=mGzQKTe_oaQQ7kNvgHnhY2y&_nc_zt=23&_nc_ht=scontent-lim1-1.xx&_nc_gid=AbyMQNGM9CAo6rKemP6W0TW&oh=00_AYCEiKoGAzxZEz-HufBnroFbJQs40nSp2_QAs3N_h5h-Ag&oe=6737D7D0","alt","Profile Image","class","img-thumbnail rounded-circle small-thumbnail",4,"ngIf","ngIfElse"],["src","https://scontent-lim1-1.xx.fbcdn.net/v/t39.30808-6/414850126_407251714969818_7350880059826478217_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=mGzQKTe_oaQQ7kNvgHnhY2y&_nc_zt=23&_nc_ht=scontent-lim1-1.xx&_nc_gid=AbyMQNGM9CAo6rKemP6W0TW&oh=00_AYCEiKoGAzxZEz-HufBnroFbJQs40nSp2_QAs3N_h5h-Ag&oe=6737D7D0","alt","Profile Image",1,"img-thumbnail","rounded-circle","small-thumbnail"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","Alternative Image",1,"img-thumbnail","rounded-circle","small-thumbnail"]],template:function(e,t){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3),h(3,Yt,20,8,"div",4),i(),n(4,"div",5)(5,"div",6)(6,"ul",7)(7,"li",8)(8,"div",2)(9,"div",9)(10,"p",10),a(11,"Filtros"),i()(),n(12,"div",11)(13,"button",12),f("click",function(){return t.clearFilter()}),i()()()(),n(14,"li",8)(15,"div",2)(16,"p",10),a(17,"Periodo"),i()(),n(18,"div",2)(19,"div",9)(20,"div",13)(21,"button",14),f("click",function(){return t.filterToday()}),a(22,"Hoy"),i()()(),n(23,"div",9)(24,"div",13)(25,"button",14),f("click",function(){return t.filterTomorrow()}),a(26,"Ma\xF1ana"),i()()()(),n(27,"div",15)(28,"div",9)(29,"div",13)(30,"button",14),f("click",function(){return t.filterThisWeek()}),a(31,"Esta Semana"),i()()(),n(32,"div",9)(33,"div",13)(34,"button",14),f("click",function(){return t.filterNextWeek()}),a(35,"Pr\xF3xima Semana"),i()()()()()()()()()()),e&2&&(s(3),d("ngForOf",t.filtercitas))},dependencies:[M,Ce,F,A],styles:[".hover[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}.small-thumbnail[_ngcontent-%COMP%]{width:120px!important;height:120px!important}"]})};function Jt(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Tipo de sangre es requerido"),i()())}function Xt(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Factor RH es requerido y no puede exceder 2 caracteres."),i()())}function ei(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Estado civil es requerido."),i()())}function ti(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Lugar de Nacimiento es requerido"),i()())}function ii(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"La Direcci\xF3n es requerido"),i()())}function ni(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Grado de estudios es requerido"),i()())}function ri(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"La Profesi\xF3n es requerida."),i()())}function oi(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"La Ocupaci\xF3n es requerido."),i()())}function ai(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"La Religi\xF3n es requerido."),i()())}function si(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Tipo de vivienda es requerido."),i()())}function li(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Centro de Trabajo de Trabajo es requerida"),i()())}function di(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Direcci\xF3n de Trabajo es requerida"),i()())}function ci(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Raza es requerida"),i()())}function mi(o,r){o&1&&(n(0,"div",70)(1,"p",71),a(2,"Tiempo de Residencia es requerida"),i()())}function pi(o,r){if(o&1&&(n(0,"button",72),a(1,"Crear "),i()),o&2){let e=_();d("disabled",e.historyForm.invalid)}}function hi(o,r){if(o&1&&(n(0,"button",72),a(1,"Actualizar"),i()),o&2){let e=_();d("disabled",e.historyForm.invalid)}}function gi(o,r){o&1&&(n(0,"div",70),a(1," Por favor, complete todos los campos requeridos. "),i())}var Ae=class o{History;snackbar=g(N);patientService=g(H);fb=g(K);router=g(E);historyForm;existHistory=!1;ngOnInit(){this.historyForm=this.fb.group({bloodType:["",[m.required,m.maxLength(3)]],rh:["",[m.required,m.maxLength(2)]],civilState:["",[m.required,m.maxLength(20)]],birthPlace:["",[m.required,m.maxLength(50)]],dir:["",[m.required,m.maxLength(100)]],studyGrade:["",[m.required,m.maxLength(50)]],profession:["",[m.required,m.maxLength(50)]],occupation:["",[m.required,m.maxLength(50)]],workCenter:["",[m.required,m.maxLength(100)]],workDir:["",[m.required,m.maxLength(100)]],religion:["",[m.required,m.maxLength(30)]],home:["",[m.required,m.maxLength(100)]],raze:["",[m.required,m.maxLength(30)]],residentime:["",m.required]}),this.patientService.getHistoryClinical().subscribe({next:r=>{console.log(r.raze),this.History=r,this.existHistory=!0,this.historyForm.patchValue(r)},error:r=>{console.log("El usuario no tiene historia clinica, se creara",r)}})}onSubmit(){if(this.historyForm.valid){console.log("Formulario v\xE1lido y listo para enviar:",this.historyForm.value);let r=P({},this.historyForm.value);this.existHistory==!1?this.patientService.createHistoryClinical(r).subscribe({next:()=>{this.showSnackBar("Historia clinica creada exitosamente."),this.router.navigate(["/patient"])},error:e=>{let t=e.error["error:"]||"Ocurri\xF3 un error al crear la Historia clinica";console.log("Error al crear la cita:",t),this.showSnackBar(t)}}):this.patientService.updateHistoryClinical(r).subscribe({next:e=>{this.showSnackBar("Historia clinica actualizada exitosamente."),console.log(e),this.router.navigate(["/patient"])},error:e=>{let t=e.error["error:"]||"Ocurri\xF3 un error al actualizar la Historia clinica";console.log("Error al crear la cita:",t),this.showSnackBar(t)}})}}showSnackBar(r){this.snackbar.open(r,"Close",{duration:2e3,verticalPosition:"top"})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-historia-clinica"]],standalone:!0,features:[b],decls:169,vars:18,consts:[["Update",""],[1,"container-fluid","fondo"],[1,"ini"],[1,"row"],[1,"fs-1","fw-bold"],[1,"row","m-2"],[3,"ngSubmit","formGroup"],[1,"col"],[1,"form-group"],["for","bloodType"],["id","bloodType","formControlName","bloodType",1,"form-select","border","border-black"],["value","","disabled",""],["value","A"],["value","B"],["value","AB"],["value","O"],["class","error",4,"ngIf"],["for","rh"],["id","rh","formControlName","rh",1,"form-select","border","border-black"],["value","+"],["value","-"],["id","civilState","formControlName","civilState",1,"form-select","border","border-black"],["value","Soltero"],["value","Casado"],["value","Divorciado"],["value","Viudo"],["for","birthPlace",1,"mt-3"],["type","text","id","birthPlace","formControlName","birthPlace","placeholder","Lugar de Nacimiento",1,"form-control","border","border-black"],["for","dir",1,"mt-3"],["type","text","id","dir","formControlName","dir","placeholder","Direcci\xF3n",1,"form-control","border","border-black"],["for","studyGrade"],["id","studyGrade","formControlName","studyGrade",1,"form-select","border","border-black"],["value","Primaria"],["value","Secundaria"],["value","Bachiller"],["value","Superior"],["for","profession",1,"mt-3"],["type","text","id","profession","formControlName","profession","placeholder","Profesi\xF3n",1,"form-control","border","border-black"],["for","occupation",1,"mt-3"],["type","text","id","occupation","formControlName","occupation","placeholder","Ocupaci\xF3n",1,"form-control","border","border-black"],[1,"mt-3"],["for","religion"],["id","religion","formControlName","religion",1,"form-select","border","border-black"],["value","Catolica"],["value","Evangelico"],["value","Adventista"],["value","Ateo"],["value","Otra"],["for","home"],["id","home","formControlName","home",1,"form-select","border","border-black"],["value","Material Noble"],["value","Adobe"],["value","PreFabricado"],["value","Otro"],["for","workCenter"],["type","text","id","workCenter","formControlName","workCenter","placeholder","Centro de Trabajo",1,"form-control","border","border-black"],["for","workDir"],["type","text","id","workDir","formControlName","workDir","placeholder","Direcci\xF3n de Trabajo",1,"form-control","border","border-black"],[1,"col-md-4"],["for","raze"],["id","raze","formControlName","raze",1,"form-select","border","border-black"],["value","Caucasica"],["value","Mestizo"],["value","Afroamericano"],["value","Mulato"],["value","Indigena"],["for","residentime"],["type","text","id","residentime","formControlName","residentime","placeholder","Tiempo de Residencia",1,"form-control","border","border-black"],[1,"d-grid","gap-2","offset-md-2","col-md-6"],["type","submit","class","btn btn-dark mt-3 rounded-pill p-2 ",3,"disabled",4,"ngIf","ngIfElse"],[1,"error"],[1,"text-danger","fs-6"],["type","submit",1,"btn","btn-dark","mt-3","rounded-pill","p-2",3,"disabled"]],template:function(e,t){if(e&1){let l=z();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),a(4,"Datos de afiliaci\xF3n"),i()(),n(5,"div",5)(6,"form",6),f("ngSubmit",function(){return C(l),I(t.onSubmit())}),n(7,"div",3)(8,"div",7)(9,"div",8)(10,"div",8)(11,"label",9),a(12,"Grupo Sangu\xEDneo"),i(),n(13,"select",10)(14,"option",11),a(15,"Tipo"),i(),n(16,"option",12),a(17,"A"),i(),n(18,"option",13),a(19,"B"),i(),n(20,"option",14),a(21,"AB"),i(),n(22,"option",15),a(23,"O"),i()()(),h(24,Jt,3,0,"div",16),i()(),n(25,"div",7)(26,"div",8)(27,"label",17),a(28,"Factor RH"),i(),n(29,"select",18)(30,"option",11),a(31,"RH"),i(),n(32,"option",19),a(33,"Positivo"),i(),n(34,"option",20),a(35,"Negativo"),i()(),h(36,Xt,3,0,"div",16),i()(),n(37,"div",7)(38,"div",8)(39,"label",17),a(40,"Estado civil"),i(),n(41,"select",21)(42,"option",11),a(43,"Estado civil"),i(),n(44,"option",22),a(45,"Soltero"),i(),n(46,"option",23),a(47,"Casado"),i(),n(48,"option",24),a(49,"Divorciado"),i(),n(50,"option",25),a(51,"Viudo"),i()(),h(52,ei,3,0,"div",16),i()()(),n(53,"div",3)(54,"div",8)(55,"label",26),a(56,"Lugar de Nacimiento"),i(),p(57,"input",27),i(),h(58,ti,3,0,"div",16),i(),n(59,"div",3)(60,"div",8)(61,"label",28),a(62,"Direcci\xF3n"),i(),p(63,"input",29),i(),h(64,ii,3,0,"div",16),i(),n(65,"div",3)(66,"div",8)(67,"label",30),a(68,"Grado de Estudio"),i(),n(69,"select",31)(70,"option",11),a(71,"Grado"),i(),n(72,"option",32),a(73,"Primaria"),i(),n(74,"option",33),a(75,"Secundaria"),i(),n(76,"option",34),a(77,"Bachiller"),i(),n(78,"option",35),a(79,"Superior"),i()(),h(80,ni,3,0,"div",16),i()(),n(81,"div",3)(82,"div",8)(83,"label",36),a(84,"Profesi\xF3n"),i(),p(85,"input",37),i(),h(86,ri,3,0,"div",16),i(),n(87,"div",3)(88,"div",8)(89,"label",38),a(90,"Ocupaci\xF3n"),i(),p(91,"input",39),i(),h(92,oi,3,0,"div",16),i(),n(93,"div",3)(94,"div",7)(95,"div",40)(96,"label",41),a(97,"Religi\xF3n"),i(),n(98,"select",42)(99,"option",11),a(100,"Religi\xF3n"),i(),n(101,"option",43),a(102,"Catolica"),i(),n(103,"option",44),a(104,"Evangelico"),i(),n(105,"option",45),a(106,"Adventista"),i(),n(107,"option",46),a(108,"Ateo"),i(),n(109,"option",47),a(110,"Otra"),i()(),h(111,ai,3,0,"div",16),i()(),n(112,"div",7)(113,"div",40)(114,"label",48),a(115,"Tipo de vivienda"),i(),n(116,"select",49)(117,"option",11),a(118,"Tipo Vivienda"),i(),n(119,"option",50),a(120,"Material Noble"),i(),n(121,"option",51),a(122,"Adobe"),i(),n(123,"option",52),a(124,"PreFabricado"),i(),n(125,"option",53),a(126,"Otro"),i()(),h(127,si,3,0,"div",16),i()()(),n(128,"div",3)(129,"div",40)(130,"label",54),a(131,"Nombre Centro de Trabajo"),i(),p(132,"input",55),i(),h(133,li,3,0,"div",16),i(),n(134,"div",3)(135,"div",40)(136,"label",56),a(137,"Direcci\xF3n de Trabajo"),i(),p(138,"input",57),i(),h(139,di,3,0,"div",16),i(),n(140,"div",3)(141,"div",58)(142,"div",40)(143,"label",59),a(144,"Raza"),i(),n(145,"select",60),p(146,"option",11),n(147,"option",61),a(148,"Caucasica"),i(),n(149,"option",62),a(150,"Mestizo"),i(),n(151,"option",63),a(152,"Afroamericano"),i(),n(153,"option",64),a(154,"Mulato"),i(),n(155,"option",65),a(156,"Ind\xEDgena"),i()(),h(157,ci,3,0,"div",16),i()(),n(158,"div",7)(159,"div",40)(160,"label",66),a(161,"Tiempo de Residencia en Trujillo"),i(),p(162,"input",67),i(),h(163,mi,3,0,"div",16),i()(),n(164,"div",68),h(165,pi,2,1,"button",69)(166,hi,2,1,"ng-template",null,0,R),i()(),h(168,gi,2,0,"div",16),i()()()}if(e&2){let l,c,u,S,x,U,ie,pe,he,ge,ue,fe,_e,ve,yt=w(167);s(6),d("formGroup",t.historyForm),s(18),d("ngIf",((l=t.historyForm.get("bloodType"))==null?null:l.invalid)&&((l=t.historyForm.get("bloodType"))==null?null:l.touched)),s(12),d("ngIf",((c=t.historyForm.get("rh"))==null?null:c.invalid)&&((c=t.historyForm.get("rh"))==null?null:c.touched)),s(16),d("ngIf",((u=t.historyForm.get("civilState"))==null?null:u.invalid)&&((u=t.historyForm.get("civilState"))==null?null:u.touched)),s(6),d("ngIf",((S=t.historyForm.get("birthPlace"))==null?null:S.invalid)&&((S=t.historyForm.get("birthPlace"))==null?null:S.touched)),s(6),d("ngIf",((x=t.historyForm.get("dir"))==null?null:x.invalid)&&((x=t.historyForm.get("dir"))==null?null:x.touched)),s(16),d("ngIf",((U=t.historyForm.get("studyGrade"))==null?null:U.invalid)&&((U=t.historyForm.get("studyGrade"))==null?null:U.touched)),s(6),d("ngIf",((ie=t.historyForm.get("profession"))==null?null:ie.invalid)&&((ie=t.historyForm.get("profession"))==null?null:ie.touched)),s(6),d("ngIf",((pe=t.historyForm.get("occupation"))==null?null:pe.invalid)&&((pe=t.historyForm.get("occupation"))==null?null:pe.touched)),s(19),d("ngIf",((he=t.historyForm.get("religion"))==null?null:he.invalid)&&((he=t.historyForm.get("religion"))==null?null:he.touched)),s(16),d("ngIf",((ge=t.historyForm.get("home"))==null?null:ge.invalid)&&((ge=t.historyForm.get("home"))==null?null:ge.touched)),s(6),d("ngIf",((ue=t.historyForm.get("workCenter"))==null?null:ue.invalid)&&((ue=t.historyForm.get("workCenter"))==null?null:ue.touched)),s(6),d("ngIf",((fe=t.historyForm.get("workDir"))==null?null:fe.invalid)&&((fe=t.historyForm.get("workDir"))==null?null:fe.touched)),s(18),d("ngIf",((_e=t.historyForm.get("raze"))==null?null:_e.invalid)&&((_e=t.historyForm.get("raze"))==null?null:_e.touched)),s(6),d("ngIf",((ve=t.historyForm.get("residentime"))==null?null:ve.invalid)&&((ve=t.historyForm.get("residentime"))==null?null:ve.touched)),s(2),d("ngIf",t.existHistory===!1)("ngIfElse",yt),s(3),d("ngIf",t.historyForm.invalid&&t.historyForm.touched)}},dependencies:[A,j,Q,$,Z,W,T,q,Y,V,G,M,F],styles:[".fondo[_ngcontent-%COMP%]{font-family:Montserrat;display:flex;justify-content:center;align-items:center}.ini[_ngcontent-%COMP%]{display:flex;max-width:650px;min-height:550px;padding:40px 87px;flex-direction:column;align-items:center;border-radius:30px;background:#fff;box-shadow:0 0 10px #00000080}.ini[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:#444040}"]})};function ui(o,r){o&1&&(n(0,"div",34)(1,"small"),a(2,"El g\xE9nero es obligatorio."),i()())}function fi(o,r){o&1&&(n(0,"span"),a(1," La fecha de nacimiento es obligatoria. "),i())}function _i(o,r){if(o&1&&(n(0,"div",35),h(1,fi,2,0,"span",36),i()),o&2){let e,t=_();s(),d("ngIf",(e=t.updateUserForm.get("birthday"))==null||e.errors==null?null:e.errors.required)}}function vi(o,r){o&1&&(n(0,"span"),a(1," El tel\xE9fono es obligatorio. "),i())}function yi(o,r){o&1&&(n(0,"span"),a(1," El numero de telefono no puede ser menor o mayor a 9 digitos. "),i())}function bi(o,r){o&1&&(n(0,"span"),a(1," Introduzca un n\xFAmero de tel\xE9fono v\xE1lido. "),i())}function Ci(o,r){if(o&1&&(n(0,"div",35),h(1,vi,2,0,"span",36)(2,yi,2,0,"span",36)(3,bi,2,0,"span",36),i()),o&2){let e,t,l,c=_();s(),d("ngIf",(e=c.updateUserForm.get("phone"))==null||e.errors==null?null:e.errors.required),s(),d("ngIf",((t=c.updateUserForm.get("phone"))==null||t.errors==null?null:t.errors.minlength)||((t=c.updateUserForm.get("phone"))==null||t.errors==null?null:t.errors.maxlength)),s(),d("ngIf",(l=c.updateUserForm.get("phone"))==null||l.errors==null?null:l.errors.pattern)}}function Ii(o,r){o&1&&(n(0,"div",34)(1,"small"),a(2,"El nombre es obligatorio."),i()())}function Mi(o,r){o&1&&(n(0,"div",34)(1,"small"),a(2,"El apellido es obligatorio."),i()())}function Ei(o,r){o&1&&(n(0,"div",34)(1,"small"),a(2,"El correo electr\xF3nico es obligatorio y debe tener un formato v\xE1lido."),i()())}function Si(o,r){o&1&&(n(0,"div",34)(1,"p",54),a(2,"El parentesco es requerido."),i()())}function zi(o,r){o&1&&(n(0,"div",34)(1,"p",54),a(2,"Por favor, especifique el parentesco."),i()())}function xi(o,r){if(o&1&&(n(0,"div",55)(1,"label",56),a(2,"Especificar parentesco"),i(),p(3,"input",57),h(4,zi,3,0,"div",22),i()),o&2){let e,t=_(2);s(4),d("ngIf",((e=t.updateUserForm.get("otherRelationship"))==null?null:e.invalid)&&((e=t.updateUserForm.get("otherRelationship"))==null?null:e.touched))}}function wi(o,r){o&1&&(n(0,"div",58)(1,"p",59),a(2,"El nombre es requerido"),i()())}function ki(o,r){o&1&&(n(0,"div",58)(1,"p",59),a(2,"La Direcci\xF3n es requerido"),i()())}function Di(o,r){o&1&&(n(0,"span"),a(1,"El tel\xE9fono es requerido."),i())}function Fi(o,r){o&1&&(n(0,"span"),a(1,"El tel\xE9fono solo debe contener n\xFAmeros."),i())}function Li(o,r){o&1&&(n(0,"span"),a(1," El tel\xE9fono debe tener exactamente 9 d\xEDgitos. "),i())}function Oi(o,r){if(o&1&&(n(0,"div",34)(1,"p",59),h(2,Di,2,0,"span",36)(3,Fi,2,0,"span",36)(4,Li,2,0,"span",36),i()()),o&2){let e,t,l,c=_(2);s(2),d("ngIf",(e=c.updateUserForm.get("pphone"))==null?null:e.hasError("required")),s(),d("ngIf",(t=c.updateUserForm.get("pphone"))==null?null:t.hasError("pattern")),s(),d("ngIf",((l=c.updateUserForm.get("pphone"))==null?null:l.hasError("minlength"))||((l=c.updateUserForm.get("pphone"))==null?null:l.hasError("maxlength")))}}function Pi(o,r){if(o&1){let e=z();n(0,"div")(1,"form",15),f("ngSubmit",function(){C(e);let l=_();return I(l.onSubmit())}),n(2,"div",37)(3,"label",38),a(4,"Tipo de parentesco"),i(),n(5,"select",39),f("change",function(l){C(e);let c=_();return I(c.onRelationshipChange(l))}),n(6,"option",40),a(7,"Seleccione el parentesco"),i(),n(8,"option",41),a(9,"Padre"),i(),n(10,"option",42),a(11,"Madre"),i(),n(12,"option",43),a(13,"Hermano"),i(),n(14,"option",44),a(15,"Hijo"),i(),n(16,"option",45),a(17,"Otro"),i()(),h(18,Si,3,0,"div",22),i(),h(19,xi,5,1,"div",46),n(20,"div",37)(21,"label",47),a(22,"Nombre"),i(),p(23,"input",48),i(),h(24,wi,3,0,"div",49),n(25,"div",37)(26,"label",50),a(27,"Direcci\xF3n"),i(),p(28,"input",51),i(),h(29,ki,3,0,"div",49),n(30,"div",37)(31,"label",52),a(32,"Tel\xE9fono"),i(),p(33,"input",53),i(),h(34,Oi,5,3,"div",22),i()()}if(o&2){let e,t,l,c,u=_();s(),d("formGroup",u.updateUserForm),s(17),d("ngIf",((e=u.updateUserForm.get("parent"))==null?null:e.invalid)&&((e=u.updateUserForm.get("parent"))==null?null:e.touched)),s(),d("ngIf",u.showOtherRelationship),s(5),d("ngIf",((t=u.updateUserForm.get("pname"))==null?null:t.invalid)&&((t=u.updateUserForm.get("pname"))==null?null:t.touched)),s(5),d("ngIf",((l=u.updateUserForm.get("pdir"))==null?null:l.invalid)&&((l=u.updateUserForm.get("pdir"))==null?null:l.touched)),s(5),d("ngIf",((c=u.updateUserForm.get("pphone"))==null?null:c.invalid)&&((c=u.updateUserForm.get("pphone"))==null?null:c.touched))}}function Ri(o,r){o&1&&(n(0,"p",60),a(1,"No puedes editar estos campos ya que no tienes informaci\xF3n de emergencia registrada!"),i())}var Ne=class o{UserProfile;authService=g(re);snackbar=g(N);patientService=g(H);fb=g(K);router=g(E);profileId=0;updateUserForm;existEmercency=!1;showOtherRelationship=!1;constructor(){this.updateUserForm=this.fb.group({name:["",[m.required]],lastname:["",[m.required]],email:["",[m.required,m.email]],gender:["",[m.required]],birthday:["",[m.required]],phone:["",[m.required,m.minLength(9),m.maxLength(9),m.pattern("^[0-9]*$")]],parent:["",[m.required]],pname:["",[m.required]],pphone:["",[m.required,m.minLength(9),m.maxLength(9),m.pattern("^[0-9]*$")]],pdir:["",[m.required]],otherRelationship:[""]})}ngOnInit(){let e=this.authService.getUser()?.id;e&&(this.profileId=e,this.patientService.getUserbyID(e).subscribe({next:t=>{this.UserProfile=t,this.updateUserForm.patchValue(t)},error:t=>{this.showSnackBar(t.error?.value)}}),this.patientService.getEmercenCyInfo().subscribe({next:()=>{this.existEmercency=!0},error:t=>{console.log(t.error?.value)}}))}onRelationshipChange(r){let e=r.target.value;this.showOtherRelationship=e==="Otro",this.showOtherRelationship?this.updateUserForm.get("otherRelationship")?.setValidators(m.required):(this.updateUserForm.get("otherRelationship")?.clearValidators(),this.updateUserForm.get("otherRelationship")?.reset()),this.updateUserForm.get("otherRelationship")?.updateValueAndValidity()}onSubmit(){if(this.updateUserForm.valid){console.log("Formulario v\xE1lido y listo para enviar:",this.updateUserForm.value);let r=P({},this.updateUserForm.value);this.updateUserForm.value.parent==="Otro"&&(r.parent=this.updateUserForm.value.otherRelationship,delete r.otherRelationship),console.log("datos a enviar:",r),this.patientService.updatePatientProfile(this.profileId,r).subscribe({next:()=>{this.showSnackBar("Informaci\xF3n de emergencia registrada exitosamente."),this.existEmercency=!0,this.router.navigate(["/patient"])},error:e=>{let t=e.error.error||"Ese correo ya esta registrado";console.log("Error:",t),this.showSnackBar(t)}})}else Object.keys(this.updateUserForm.controls).forEach(r=>{this.updateUserForm.get(r)?.markAsTouched({onlySelf:!0})}),this.showSnackBar("Por favor, corrige los errores en el formulario antes de enviar.")}showSnackBar(r){this.snackbar.open(r,"Close",{duration:2e3,verticalPosition:"top"})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-patient-profile"]],standalone:!0,features:[b],decls:61,vars:13,consts:[["anothercase",""],[1,"row","p-4"],[1,"div","bg-black","text-light","p-4"],[1,"row","align-items-center","p-4"],[1,"col-md-1","p-0","text-center"],["src","https://banffventureforum.com/wp-content/uploads/2019/08/no-photo-icon-22.png","alt","Profile Image",1,"img-thumbnail","rounded-circle"],[1,"col-md-10"],[1,"ms-3"],[1,"row"],[1,"col-md-1","offset-md-9"],["routerLink","/patient",1,"btn","btn-outline-light"],[1,"col-md-2"],[1,"btn","btn-outline-light",3,"click"],[1,"col-md-8"],[1,"row","m-4"],[3,"ngSubmit","formGroup"],[1,"col-md-3","ms-4"],[1,"text-start"],["formControlName","gender",1,"form-select"],["value","","disabled",""],["value","Masculino"],["value","Femenino"],["class","text-danger",4,"ngIf"],[1,"col-md-4"],["type","date","formControlName","birthday","placeholder","Ingrese su fecha de nacimiento",1,"form-control",3,"min","max"],["class","alert alert-danger mt-2",4,"ngIf"],["type","text","formControlName","phone","placeholder","Ingrese su tel\xE9fono",1,"form-control"],["type","text","formControlName","name","placeholder","Nombre",1,"form-control"],["type","text","formControlName","lastname","placeholder","lastname",1,"form-control"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],[1,"card","m-4","center"],[1,"card-body","m-3"],[1,"fw-bold","fs-4"],[4,"ngIf","ngIfElse"],[1,"text-danger"],[1,"alert","alert-danger","mt-2"],[4,"ngIf"],[1,"form-group"],["for","parent"],["id","parent","formControlName","parent",1,"form-select","border","border-black",3,"change"],["value","","disabled","","selected",""],["value","Padre"],["value","Madre"],["value","Hermano"],["value","Hijo"],["value","Otro"],["class","form-group mt-3",4,"ngIf"],["for","name",1,"mt-3"],["type","text","id","pname","formControlName","pname","placeholder","Nombre",1,"form-control","border","border-black"],["class","error",4,"ngIf"],["for","pdir",1,"mt-3"],["type","text","id","pdir","formControlName","pdir","placeholder","Direcci\xF3n",1,"form-control","border","border-black"],["for","pphone",1,"mt-3"],["type","tel","id","pphone","formControlName","pphone","placeholder","Tel\xE9fono","maxlength","9","pattern","[0-9]*","inputmode","numeric",1,"form-control","border","border-black"],[1,"fs-6"],[1,"form-group","mt-3"],["for","otherRelationship"],["type","text","id","otherRelationship","formControlName","otherRelationship","placeholder","Especifique el parentesco",1,"form-control","border","border-black"],[1,"error"],[1,"text-danger","fs-6"],[1,"text-danger","text-center"]],template:function(e,t){if(e&1){let l=z();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),p(4,"img",5),i(),n(5,"div",6)(6,"h3",7),a(7),i()()(),n(8,"div",8)(9,"div",9)(10,"button",10),a(11,"Cancelar"),i()(),n(12,"div",11)(13,"button",12),f("click",function(){return C(l),I(t.onSubmit())}),a(14,"Guardar Cambios"),i()()()()(),n(15,"div",8)(16,"div",13)(17,"div",14)(18,"h1"),a(19,"Sobre m\xED :"),i()(),n(20,"form",15),f("ngSubmit",function(){return C(l),I(t.onSubmit())}),n(21,"div",14)(22,"div",16)(23,"label",17),a(24,"Genero"),i(),n(25,"select",18)(26,"option",19),a(27,"Selecciona tu g\xE9nero"),i(),n(28,"option",20),a(29,"Masculino"),i(),n(30,"option",21),a(31,"Femenino"),i()(),h(32,ui,3,0,"div",22),i(),n(33,"div",23)(34,"label",17),a(35,"Fecha de Nacimiento"),i(),p(36,"input",24),h(37,_i,2,1,"div",25),i(),n(38,"div",23)(39,"label",17),a(40,"Numero de telefono"),i(),p(41,"input",26),h(42,Ci,4,3,"div",25),i()(),n(43,"div",14)(44,"div",16),p(45,"input",27),h(46,Ii,3,0,"div",22),i(),n(47,"div",23),p(48,"input",28),h(49,Mi,3,0,"div",22),i(),n(50,"div",23),p(51,"input",29),h(52,Ei,3,0,"div",22),i()()()(),n(53,"div",23)(54,"div",30)(55,"div",31)(56,"h2",32),a(57,"Informaci\xF3n de emergencia"),i(),h(58,Pi,35,6,"div",33)(59,Ri,2,0,"ng-template",null,0,R),i()()()()}if(e&2){let l,c,u,S,x,U,ie=w(60);s(7),D("",t.UserProfile.name," ",t.UserProfile.lastname,""),s(13),d("formGroup",t.updateUserForm),s(12),d("ngIf",((l=t.updateUserForm.get("gender"))==null?null:l.invalid)&&((l=t.updateUserForm.get("gender"))==null?null:l.touched)),s(4),d("min","2000-01-01")("max","2024-12-31"),s(),d("ngIf",((c=t.updateUserForm.get("birthday"))==null?null:c.invalid)&&(((c=t.updateUserForm.get("birthday"))==null?null:c.dirty)||((c=t.updateUserForm.get("birthday"))==null?null:c.touched))),s(5),d("ngIf",((u=t.updateUserForm.get("phone"))==null?null:u.invalid)&&(((u=t.updateUserForm.get("phone"))==null?null:u.dirty)||((u=t.updateUserForm.get("phone"))==null?null:u.touched))),s(4),d("ngIf",((S=t.updateUserForm.get("name"))==null?null:S.invalid)&&((S=t.updateUserForm.get("name"))==null?null:S.touched)),s(3),d("ngIf",((x=t.updateUserForm.get("lastname"))==null?null:x.invalid)&&((x=t.updateUserForm.get("lastname"))==null?null:x.touched)),s(3),d("ngIf",((U=t.updateUserForm.get("email"))==null?null:U.invalid)&&((U=t.updateUserForm.get("email"))==null?null:U.touched)),s(6),d("ngIf",t.existEmercency===!0)("ngIfElse",ie)}},dependencies:[M,F,ne,Y,j,Q,$,Z,W,T,q,Me,Ee,V,G]})};var io=[{path:"",component:xe,children:[{path:"",component:we},{path:"actualizar",component:Ne},{path:"HistoriaClinica",component:Ae},{path:"MisCitas",component:Te},{path:"cita",component:Le},{path:"cita/dentistas",component:Oe},{path:"cita/dentistas/dentista",component:Pe},{path:"cita/dentistas/dentista/detallesCita",component:Re}]}];export{io as patientantRoutes};
