import{b as k,c as pe}from"./chunk-7RMHXTQL.js";import{a as te,b as ie,c as v,d as ae,e as ne,g as re,h as oe,i as le,j as de,p as ce,r as me,s as L,t as se,u as ue}from"./chunk-SULFMCNP.js";import{g as Q,h as _,i as Z,l as ee,m as y}from"./chunk-BCCDL4G2.js";import"./chunk-XAZLOLJU.js";import{$ as H,Ba as Y,Db as b,Ea as o,Eb as E,Fa as s,Gb as W,Hb as q,Ib as $,Ua as p,W as B,Ya as d,da as h,db as n,ea as U,eb as i,ec as X,fb as c,fc as J,gc as D,ic as K,jc as g,kb as A,mb as f,ub as G,vb as r,wb as m,xb as x,yb as V}from"./chunk-YRFRVEA6.js";var w=l=>({"active-btn":l}),P=class l{router=H(_);authService=H(y);isStudent=!1;isAuthenticated=!1;isActive(t){return this.router.isActive("/dentist/"+t,{paths:"exact",queryParams:"ignored",fragment:"ignored",matrixParams:"ignored"})}ngOnInit(){this.authService.getUserProfile().subscribe(t=>{this.isStudent=t.condition==="Estudiante",this.isAuthenticated=!0})}logout(){this.authService.logout(),this.isAuthenticated=!1,this.router.navigate(["/auth/login"])}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=h({type:l,selectors:[["app-dentist-layout"]],standalone:!0,features:[b],decls:24,vars:13,consts:[[1,"container-fluid","h-100"],[1,"row","h-100"],[1,"col-1","bg-dark","text-light","d-flex","flex-column","align-items-center","py-4"],["routerLink","/dentist/profile",1,"btn","w-100","mb-3","text-light",3,"ngClass"],[1,"fa-regular","fa-user","d-block","mb-2"],["routerLink","",1,"btn","w-100","mb-3","text-light",3,"ngClass"],[1,"fa-regular","fa-file-alt","d-block","mb-2"],[1,"fa-regular","fa-calendar-check","d-block","mb-2"],[1,"btn","w-100","mb-3","text-light",3,"ngClass","routerLink"],[1,"fa-regular","fa-hospital","d-block","mb-2"],[1,"mt-auto"],[1,"btn",3,"click"],[1,"fa-solid","fa-right-from-bracket","fa-rotate-180","text-white"],[1,"col-md-10","bg-light","p-4"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),c(4,"i",4),n(5,"span"),r(6,"Cuenta"),i()(),n(7,"button",5),c(8,"i",6),n(9,"span"),r(10,"Documentos"),i()(),n(11,"button",5),c(12,"i",7),n(13,"span"),r(14,"Agenda"),i()(),n(15,"button",8),c(16,"i",9),n(17,"span"),r(18,"Consultorio"),i()(),n(19,"div",10)(20,"button",11),A("click",function(){return a.logout()}),c(21,"i",12),i()()(),n(22,"div",13),c(23,"router-outlet"),i()()()),e&2&&(o(3),d("ngClass",E(5,w,a.isActive("profile"))),o(4),d("ngClass",E(7,w,a.isActive(""))),o(4),d("ngClass",E(9,w,a.isActive(""))),o(4),d("ngClass",E(11,w,a.isActive(a.isStudent?"upao-info":"add-clinic")))("routerLink",a.isStudent?"upao-info":"add-clinic"))},dependencies:[g,X,Q,Z],styles:[".btn[_ngcontent-%COMP%]{color:#ccc;background:none;border:none;text-align:center;transition:color .3s ease,background-color .3s ease}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px}.btn[_ngcontent-%COMP%]:hover{color:#fff}.active-btn[_ngcontent-%COMP%]{background-color:#555;color:#fff}"]})};function he(l,t){if(l&1&&(n(0,"div")(1,"small",33),r(2),i()()),l&2){let e=f();o(2),m(e.getErrorMessage("name"))}}function be(l,t){if(l&1&&(n(0,"div")(1,"small",33),r(2),i()()),l&2){let e=f();o(2),m(e.getErrorMessage("address"))}}function Ce(l,t){if(l&1&&(n(0,"div")(1,"small",33),r(2),i()()),l&2){let e=f();o(2),m(e.getErrorMessage("telf"))}}function ye(l,t){if(l&1&&(n(0,"div")(1,"small",33),r(2),i()()),l&2){let e=f();o(2),m(e.getErrorMessage("email"))}}function xe(l,t){if(l&1&&(n(0,"div",34),c(1,"input",35),n(2,"label",36),r(3),i()()),l&2){let e=t.$implicit,a=t.index;o(),d("formControlName",a)("id","day"+a),o(),d("for","day"+a),o(),m(e.label)}}function Se(l,t){if(l&1&&(n(0,"div")(1,"small",33),r(2),i()()),l&2){let e=f();o(2),m(e.getErrorMessage("openHour"))}}function De(l,t){if(l&1&&(n(0,"div")(1,"small",33),r(2),i()()),l&2){let e=f();o(2),m(e.getErrorMessage("closeHour"))}}var T=class l{constructor(t,e,a,u,C,S){this.fb=t;this.clinicService=e;this.storageService=a;this.authService=u;this.router=C;this.snackBar=S;this.clinicForm=this.fb.group({name:[{value:"",disabled:!0},[v.maxLength(255)]],openHour:[{value:"",disabled:!0},[v.pattern(/^([0-1]\d|2[0-3]):([0-5]\d)$/)]],closeHour:[{value:"",disabled:!0},[v.pattern(/^([0-1]\d|2[0-3]):([0-5]\d)$/)]],openDays:this.fb.array(this.daysOfWeek.map(()=>this.fb.control({value:!1,disabled:!0}))),address:[{value:"",disabled:!0},[v.maxLength(255)]],desc:[{value:"",disabled:!0},[v.maxLength(500)]],telf:[{value:"",disabled:!0},[v.pattern(/^[0-9]{4,15}$/)]],email:[{value:"",disabled:!0},[v.email,v.maxLength(100)]],latitude:[{value:"",disabled:!0},[v.pattern(/^[-+]?[0-9]{1,2}\.[0-9]+$/)]],longitude:[{value:"",disabled:!0},[v.pattern(/^[-+]?[0-9]{1,3}\.[0-9]+$/)]]})}clinicForm;daysOfWeek=[{value:"MONDAY",label:"Lunes"},{value:"TUESDAY",label:"Martes"},{value:"WEDNESDAY",label:"Mi\xE9rcoles"},{value:"THURSDAY",label:"Jueves"},{value:"FRIDAY",label:"Viernes"},{value:"SATURDAY",label:"S\xE1bado"},{value:"SUNDAY",label:"Domingo"}];isEditMode=!1;ngOnInit(){this.authService.getUserProfile().subscribe(t=>{let e=t.condition;console.log("Perfil del usuario:",t),console.log("Condicion: ",e)})}get openDaysArray(){return this.clinicForm.get("openDays")}toggleEditMode(){this.isEditMode=!this.isEditMode,this.isEditMode?(this.clinicForm.enable(),this.openDaysArray.controls.forEach(t=>t.enable())):(this.clinicForm.disable(),this.openDaysArray.controls.forEach(t=>t.disable()))}getSelectedDays(){return this.daysOfWeek.filter((t,e)=>this.openDaysArray.at(e).value).map(t=>t.value)}getErrorMessage(t){let e=this.clinicForm.get(t);return e?.hasError("required")?"Este campo es obligatorio":e?.hasError("maxlength")?"Este campo excede el m\xE1ximo de caracteres permitidos":t==="email"&&e?.hasError("email")?"El email debe ser v\xE1lido":t==="telf"&&e?.hasError("pattern")?"El tel\xE9fono debe contener entre 4 a 15 d\xEDgitos":""}onSubmit(){if(this.clinicForm.valid){let t={};this.clinicForm.get("name")?.value&&(t.name=this.clinicForm.get("name")?.value),this.clinicForm.get("openHour")?.value&&(t.openHour=this.clinicForm.get("openHour")?.value),this.clinicForm.get("closeHour")?.value&&(t.closeHour=this.clinicForm.get("closeHour")?.value);let e=this.getSelectedDays();e.length>0&&(t.openDays=e.join(",")),this.clinicForm.get("address")?.value&&(t.address=this.clinicForm.get("address")?.value),this.clinicForm.get("desc")?.value&&(t.desc=this.clinicForm.get("desc")?.value),this.clinicForm.get("telf")?.value&&(t.telf=this.clinicForm.get("telf")?.value),this.clinicForm.get("email")?.value&&(t.email=this.clinicForm.get("email")?.value),this.clinicForm.get("latitude")?.value&&(t.latitude=this.clinicForm.get("latitude")?.value),this.clinicForm.get("longitude")?.value&&(t.longitude=this.clinicForm.get("longitude")?.value),this.clinicService.updateClinic(t).subscribe({next:()=>{this.snackBar.open("Cl\xEDnica actualizada exitosamente","Cerrar",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"}),this.router.navigate(["/dentist/profile"])},error:a=>{this.snackBar.open("Error al actualizar cl\xEDnica","Cerrar",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"});let u=this.storageService.getAuthData(),C=u?u.token:null;C?this.clinicService.addClinic(t,C).subscribe({next:()=>{this.snackBar.open("Cl\xEDnica creada exitosamente","Cerrar",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"}),this.router.navigate(["/dentist/profile"])},error:S=>{this.snackBar.open("Error al crear cl\xEDnica","Cerrar",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"})}}):this.snackBar.open("Error: No se pudo obtener el token","Cerrar",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"})}})}else this.snackBar.open("Formulario inv\xE1lido","Cerrar",{duration:3e3,verticalPosition:"top",horizontalPosition:"center"})}static \u0275fac=function(e){return new(e||l)(s(ce),s(k),s(ee),s(y),s(_),s(ue))};static \u0275cmp=h({type:l,selectors:[["app-add-clinic"]],standalone:!0,features:[b],decls:60,vars:15,consts:[[1,"container","clinic-form-container","mt-5"],[1,"text-center","my-4","p-2","card","profile-card","shadow-sm","bg-dark","rounded-2"],[1,"text-light","fs-4"],[1,"row"],[1,"col-md-6"],[1,"shadow-sm","p-5","text-light","bg-dark","rounded-2",3,"formGroup"],[1,"form-group","mb-3"],["for","name",1,"form-label"],["type","text","id","name","placeholder","Nombre de su centro de trabajo","formControlName","name",1,"form-control",3,"readonly"],[4,"ngIf"],["for","address",1,"form-label"],["type","text","id","address","placeholder","Direcci\xF3n de su centro de trabajo","formControlName","address",1,"form-control",3,"readonly"],["for","telf",1,"form-label"],["type","tel","id","telf","placeholder","N\xFAmero de su centro de trabajo","formControlName","telf",1,"form-control",3,"readonly"],["for","email",1,"form-label"],["type","email","id","email","placeholder","ejemplo@dominio.dominio","formControlName","email",1,"form-control",3,"readonly"],["for","latitude",1,"form-label"],["type","text","id","latitude","placeholder","Latitud","formControlName","latitude",1,"form-control"],["for","longitude",1,"form-label"],["type","text","id","longitude","placeholder","Longitud","formControlName","longitude",1,"form-control"],["for","desc",1,"form-label"],["id","desc","rows","3","placeholder","Cu\xE9ntale a los pacientes, \xBFComo es tu centro de trabajo?","formControlName","desc",1,"form-control"],[1,"form-label"],["formArrayName","openDays",1,"container","text-center","d-flex","flex-wrap","gap-2"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],[1,"row","justify-content-evenly"],[1,"col-4"],["for","openHour",1,"form-label"],["type","time","id","openHour","formControlName","openHour",1,"form-control",3,"disabled"],["for","closeHour",1,"form-label"],["type","time","id","closeHour","formControlName","closeHour",1,"form-control",3,"disabled"],[1,"container","text-center"],[1,"btn","btn-dark","px-5","btn-lg","mt-4",3,"click"],[1,"text-danger"],[1,"form-check","form-check-inline"],["type","checkbox",1,"btn-check",3,"formControlName","id"],[1,"btn","btn-outline-light",3,"for"]],template:function(e,a){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"p",2),r(3,"Centro Odontol\xF3gico"),i()(),n(4,"div",3)(5,"div",4)(6,"form",5)(7,"div",6)(8,"label",7),r(9,"Nombre"),i(),c(10,"input",8),p(11,he,3,1,"div",9),i(),n(12,"div",6)(13,"label",10),r(14,"Direcci\xF3n"),i(),c(15,"input",11),p(16,be,3,1,"div",9),i(),n(17,"div",6)(18,"label",12),r(19,"Tel\xE9fono"),i(),c(20,"input",13),p(21,Ce,3,1,"div",9),i(),n(22,"div",6)(23,"label",14),r(24,"Email"),i(),c(25,"input",15),p(26,ye,3,1,"div",9),i(),n(27,"div",6)(28,"label",16),r(29,"Latitud"),i(),c(30,"input",17),i(),n(31,"div",6)(32,"label",18),r(33,"Longitud"),i(),c(34,"input",19),i(),n(35,"div",6)(36,"label",20),r(37,"Descripci\xF3n"),i(),c(38,"textarea",21),i(),n(39,"div",6)(40,"label",22),r(41,"D\xEDas de Apertura"),i(),n(42,"div",23),p(43,xe,4,4,"div",24),i()(),n(44,"div",25)(45,"div",26)(46,"div",6)(47,"label",27),r(48,"Hora de Apertura"),i(),c(49,"input",28),p(50,Se,3,1,"div",9),i()(),n(51,"div",26)(52,"div",6)(53,"label",29),r(54,"Hora de Cierre"),i(),c(55,"input",30),p(56,De,3,1,"div",9),i()()(),n(57,"div",31)(58,"button",32),A("click",function(){return a.isEditMode?a.onSubmit():a.toggleEditMode()}),r(59),i()()()()()()),e&2){let u,C,S,M,F,I;o(6),d("formGroup",a.clinicForm),o(4),d("readonly",!a.isEditMode),o(),d("ngIf",((u=a.clinicForm.get("name"))==null?null:u.invalid)&&((u=a.clinicForm.get("name"))==null?null:u.touched)),o(4),d("readonly",!a.isEditMode),o(),d("ngIf",((C=a.clinicForm.get("address"))==null?null:C.invalid)&&((C=a.clinicForm.get("address"))==null?null:C.touched)),o(4),d("readonly",!a.isEditMode),o(),d("ngIf",((S=a.clinicForm.get("telf"))==null?null:S.invalid)&&((S=a.clinicForm.get("telf"))==null?null:S.touched)),o(4),d("readonly",!a.isEditMode),o(),d("ngIf",((M=a.clinicForm.get("email"))==null?null:M.invalid)&&((M=a.clinicForm.get("email"))==null?null:M.touched)),o(17),d("ngForOf",a.daysOfWeek),o(6),d("disabled",!a.isEditMode),o(),d("ngIf",((F=a.clinicForm.get("openHour"))==null?null:F.invalid)&&((F=a.clinicForm.get("openHour"))==null?null:F.touched)),o(5),d("disabled",!a.isEditMode),o(),d("ngIf",((I=a.clinicForm.get("closeHour"))==null?null:I.invalid)&&((I=a.clinicForm.get("closeHour"))==null?null:I.touched)),o(3),x(" ",a.isEditMode?"Guardar":"Editar"," ")}},dependencies:[me,re,ie,te,ae,ne,oe,de,le,g,J,D]})};var ve=(()=>{class l{static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275mod=U({type:l})}static{this.\u0275inj=B({imports:[L,g,L]})}}return l})();function Ee(l,t){if(l&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),c(4,"img",5),i(),n(5,"div",6)(6,"div",7)(7,"div",8)(8,"h2",9),r(9),i(),n(10,"p",10),r(11,"Odont\xF3logo Profesional"),i()(),n(12,"div",11)(13,"button",12),r(14,"Editar "),c(15,"i",13),i()()()()()(),n(16,"div",14)(17,"div",15)(18,"div",16)(19,"h5"),r(20,"Sobre m\xED"),i(),n(21,"ul",17)(22,"li"),c(23,"i",18),r(24),i(),n(25,"li"),c(26,"i",19),r(27),W(28,"date"),i(),n(29,"li"),c(30,"i",20),r(31),i(),n(32,"li"),c(33,"i",21),r(34),i(),n(35,"li"),c(36,"i",22),r(37),i()()()(),n(38,"div",15)(39,"div",23)(40,"h5"),r(41,"Descripci\xF3n"),i(),n(42,"p",24),r(43),i()()()()()),l&2){let e=f();o(4),d("src","default-avatar.png",Y),o(5),m(e.dentistProfile.name),o(15),m(e.dentistProfile.gender),o(3),m(q(28,8,e.dentistProfile.birthday,"MMMM d, yyyy")),o(4),m(e.dentistProfile.studyCenter),o(3),m(e.dentistProfile.email),o(3),m(e.dentistProfile.phone),o(6),m(e.dentistProfile.description)}}var j=class l{constructor(t,e){this.dentistService=t;this.authService=e}dentistProfile;ngOnInit(){let t=this.authService.getUser();t&&t.id?this.loadDentistProfile(t.id):console.error("No se pudo obtener el ID del usuario autenticado")}loadDentistProfile(t){this.dentistService.getUserbyID(t).subscribe({next:e=>{e.gender?.toLowerCase()==="m"||e.gender?.toLowerCase()==="male"?e.gender="Masculino":(e.gender?.toLowerCase()==="f"||e.gender?.toLowerCase()==="female")&&(e.gender="Femenino"),this.dentistProfile=e},error:e=>{console.error("Error fetching dentist profile",e)}})}static \u0275fac=function(e){return new(e||l)(s(pe),s(y))};static \u0275cmp=h({type:l,selectors:[["app-dentist-profile"]],standalone:!0,features:[b],decls:1,vars:1,consts:[["class","container profile-container mt-5",4,"ngIf"],[1,"container","profile-container","mt-5"],[1,"card","profile-card","p-5","shadow-sm","bg-dark","rounded-2"],[1,"row","align-items-center"],[1,"col-md-2","text-center"],["alt","Avatar",1,"rounded-circle","img-fluid","profile-avatar","mb-3",3,"src"],[1,"col-md-10"],[1,"row","justify-content-between"],[1,"col-12","col-md-8"],[1,"mb-0","text-light","fw-medium","fs-2"],[1,"mb-2","text-light","fw-light"],[1,"col-12","col-md-4","text-md-end","mt-3","mt-md-0"],["type","button",1,"btn","btn-outline-light"],[1,"fa-regular","fa-pen-to-square","ms-3"],[1,"row","justify-content-evenly","mt-5"],[1,"col-12","col-lg-6","mb-4"],[1,"card","about-card","p-4","text-light","shadow-sm","bg-dark","rounded-3"],[1,"list-unstyled","mt-3"],[1,"fas","fa-user","me-3"],[1,"fas","fa-cake-candles","me-3"],[1,"fas","fa-location-dot","me-3"],[1,"fas","fa-envelope","me-3"],[1,"fas","fa-phone","me-3"],[1,"card","description-card","p-4","shadow-sm","border-2","rounded-3"],[1,"mt-3"]],template:function(e,a){e&1&&p(0,Ee,44,11,"div",0),e&2&&d("ngIf",a.dentistProfile)},dependencies:[g,D,K,ve,se]})};function Me(l,t){if(l&1&&(n(0,"span"),r(1),i()),l&2){let e=f();o(),x(" ",e.getTranslatedDays().join(", ")," ")}}function Fe(l,t){l&1&&r(0,"No disponible")}var O=class l{constructor(t,e){this.clinicService=t;this.authService=e}clinic={};daysOfWeek=[{value:"MONDAY",label:"Lunes"},{value:"TUESDAY",label:"Martes"},{value:"WEDNESDAY",label:"Mi\xE9rcoles"},{value:"THURSDAY",label:"Jueves"},{value:"FRIDAY",label:"Viernes"},{value:"SATURDAY",label:"S\xE1bado"},{value:"SUNDAY",label:"Domingo"}];isStudent=!1;ngOnInit(){this.authService.getUserProfile().subscribe(t=>{this.isStudent=t.condition==="Estudiante",this.isStudent&&this.loadClinicData(1)})}loadClinicData(t){this.clinicService.getClinicById(t).subscribe(e=>{this.clinic=e},e=>{console.error("Error al cargar los datos de la cl\xEDnica:",e)})}getFormattedTime(t){return t?t.slice(0,5):"No disponible"}getTranslatedDays(){return this.clinic.openDays?this.clinic.openDays.map(t=>{let e=this.daysOfWeek.find(a=>a.value===t);return e?e.label:t}):[]}static \u0275fac=function(e){return new(e||l)(s(k),s(y))};static \u0275cmp=h({type:l,selectors:[["app-upao-info"]],standalone:!0,features:[b],decls:37,vars:9,consts:[["noDays",""],[1,"container","clinic-info-container","mt-5"],[1,"text-center","my-4","p-2","card","profile-card","shadow-sm","bg-dark","rounded-2"],[1,"text-light","fs-4"],[1,"row"],[1,"col-md-6"],[1,"card","p-3"],[4,"ngIf","ngIfElse"]],template:function(e,a){if(e&1&&(n(0,"div",1)(1,"div",2)(2,"p",3),r(3),i()(),n(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5"),r(8,"Descripci\xF3n"),i(),n(9,"p"),r(10),i()()(),n(11,"div",5)(12,"div",6)(13,"h5"),r(14,"Acerca de Centro Odontol\xF3gico UPAO"),i(),n(15,"p")(16,"strong"),r(17,"Direcci\xF3n:"),i(),r(18),i(),n(19,"p")(20,"strong"),r(21,"Email:"),i(),r(22),i(),n(23,"p")(24,"strong"),r(25,"Tel\xE9fono:"),i(),r(26),i(),n(27,"p")(28,"strong"),r(29,"Horario:"),i(),r(30),i(),n(31,"p")(32,"strong"),r(33,"D\xEDas de Apertura:"),i(),p(34,Me,2,1,"span",7)(35,Fe,1,0,"ng-template",null,0,$),i()()()()()),e&2){let u=G(36);o(3),m((a.clinic==null?null:a.clinic.name)||"Centro Odontol\xF3gico"),o(7),m((a.clinic==null?null:a.clinic.desc)||"Informaci\xF3n no disponible."),o(8),x(" ",(a.clinic==null?null:a.clinic.address)||"No disponible",""),o(4),x(" ",(a.clinic==null?null:a.clinic.email)||"No disponible",""),o(4),x(" ",(a.clinic==null?null:a.clinic.telf)||"No disponible",""),o(4),V(" ",a.getFormattedTime(a.clinic==null?null:a.clinic.openHour)," - ",a.getFormattedTime(a.clinic==null?null:a.clinic.closeHour),""),o(4),d("ngIf",(a.clinic==null||a.clinic.openDays==null?null:a.clinic.openDays.length)>0)("ngIfElse",u)}},dependencies:[g,D]})};var ct=[{path:"",component:P,children:[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"profile",component:j},{path:"add-clinic",component:T},{path:"upao-info",component:O}]}];export{ct as dentistRoutes};
